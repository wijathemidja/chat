!function(){function e(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(d(e)+" is not iterable")}function t(e,t,r,i){var a=n(C(1&i?e.prototype:e),t,r);return 2&i&&"function"==typeof a?function(e){return a.apply(r,e)}:a}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},n.apply(null,arguments)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var o=r&&r.prototype instanceof c?r:c,l=Object.create(o.prototype);return s(l,"_invoke",function(n,r,i){var a,o,s,c=0,l=i||[],h=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,o=0,s=e,f.n=n,u}};function d(n,r){for(o=n,s=r,t=0;!h&&c&&!i&&t<l.length;t++){var i,a=l[t],d=f.p,v=a[2];n>3?(i=v===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=d&&((i=n<2&&d<a[1])?(o=0,f.v=r,f.n=a[1]):d<v&&(i=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,o=0))}if(i||n>1)return u;throw h=!0,r}return function(i,l,v){if(c>1)throw TypeError("Generator is already running");for(h&&1===l&&d(l,v),o=l,s=v;(t=o<2?e:s)||!h;){a||(o?o<3?(o>1&&(f.n=-1),d(o,s)):f.n=s:f.v=s);try{if(c=2,a){if(o||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((t=(h=f.n<0)?s:n.call(r,f))!==u)break}catch(t){a=e,o=1,s=t}finally{c=1}}return{value:t,done:h}}}(n,i,a),!0),l}var u={};function c(){}function l(){}function h(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(s(t={},r,(function(){return this})),t),d=h.prototype=c.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=h,s(d,"constructor",h),s(h,"constructor",l),l.displayName="GeneratorFunction",s(h,i,"GeneratorFunction"),s(d),s(d,i,"Generator"),s(d,r,(function(){return this})),s(d,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:a,m:v}})()}function s(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}s=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function a(t,n){s(e,t,(function(e){return this._invoke(t,n,e)}))}a("next",0),a("throw",1),a("return",2)}},s(e,t,n,r)}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function v(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,s,"next",e)}function s(e){v(a,r,i,o,s,"throw",e)}o(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t,n){return t=C(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function E(e){var t="function"==typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,C(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),I(n,e)},E(e)}function T(e,t,n){if(_())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&I(i,n.prototype),i}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}System.register(["./index-legacy-CUMznjzA.js"],(function(n,r){"use strict";var s,h,f,v,y,m,_,I,C,S,A,D,N,O,x,R,L,M,P,V,F,U;return{setters:[function(e){s=e.r,h=e.o,f=e.c,v=e.w,y=e.u,m=e.I,_=e.a,I=e.b,C=e.d,S=e.e,A=e.f,D=e.g,N=e.h,O=e.i,x=e.j,R=e.k,L=e.l,M=e.m,P=e.n,V=e.F,F=e.p,U=e.t}],execute:function(){var r,j,B,q={},z=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(z(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new G;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},G=function(e){function t(){var e;return k(this,t),(e=w(this,t,arguments)).name="DecodeBase64StringError",e}return b(t,e),g(t)}(E(Error)),H=function(e){return function(e){var t=z(e);return K.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Q=function(){
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},W=function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&function(e){try{return K.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)}},X=function(){try{return Q()||function(){if("undefined"!=typeof process){var e=q.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||W()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Y=function(e){var t=function(e){var t,n;return null===(n=null===(t=X())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},J=function(){var e;return null===(e=X())||void 0===e?void 0:e.config},Z=function(){return g((function e(){var t=this;k(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}])}();
/**
             * @license
             * Copyright 2025 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function $(e){return e.endsWith(".cloudworkstations.dev")}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function ee(){return(ee=p(o().m((function e(t){var n;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch(t,{credentials:"include"});case 1:return n=e.v,e.a(2,n.ok)}}),e)})))).apply(this,arguments)}var te={};var ne=!1;function re(e,t){if("undefined"!=typeof window&&"undefined"!=typeof document&&$(window.location.host)&&te[e]!==t&&!te[e]&&!ne){te[e]=t;var n="__firebase__banner",r=function(){for(var e={prod:[],emulator:[]},t=0,n=Object.keys(te);t<n.length;t++){var r=n[t];te[r]?e.emulator.push(r):e.prod.push(r)}return e}().prod.length>0;"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function i(e){return"__firebase__banner__".concat(e)}function a(){var e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=function(){var e;ne=!0,(e=document.getElementById(n))&&e.remove()},e}function o(){var e,t,o,s=(e=n,t=document.getElementById(e),o=!1,t||((t=document.createElement("div")).setAttribute("id",e),o=!0),{created:o,element:t}),u=i("text"),c=document.getElementById(u)||document.createElement("span"),l=i("learnmore"),h=document.getElementById(l)||document.createElement("a"),f=i("preprendIcon"),d=document.getElementById(f)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){var v=s.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(v),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(h,l);var p=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,f),v.append(d,c,h,p),document.body.appendChild(v)}r?(c.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',c.innerText="Preview backend running in this workspace."),c.setAttribute("id",u)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function ie(){return!function(){var e,t=null===(e=X())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"===("undefined"==typeof indexedDB?"undefined":d(indexedDB))}catch(e){return!1}}function oe(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var se=function(e){function t(e,n,r){var i;return k(this,t),(i=w(this,t,[n])).code=e,i.customData=r,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,ue.prototype.create),i}return b(t,e),g(t)}(E(Error)),ue=function(){return g((function e(t,n,r){k(this,e),this.service=t,this.serviceName=n,this.errors=r}),[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ce,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new se(n,a,t)}}])}();var ce=/\{\$([^}]+)}/g;function le(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(he(s)&&he(u)){if(!le(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function he(e){return null!==e&&"object"===d(e)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function fe(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function de(e){return e&&e._delegate?e._delegate:e}var ve=function(){return g((function e(t,n,r){k(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}),[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}])}(),pe="[DEFAULT]",ye=function(){return g((function e(t,n){k(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}),[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Z;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(u){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:(e=p(o().m((function e(){var t;return o().w((function(e){for(;;)switch(e.n){case 0:return t=Array.from(this.instances.values()),e.n=1,Promise.all([].concat(u(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),u(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 1:return e.a(2)}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=l(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],h=s[1];r===this.normalizeInstanceIdentifier(u)&&h.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===pe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return this.component?this.component.multipleInstances?e:pe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]);var e}();
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var ge,me=function(){return g((function e(t){k(this,e),this.name=t,this.providers=new Map}),[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ye(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ge||(ge={}));var ke,we,be={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Ee=ge.INFO,Te=a(a(a(a(a({},ge.DEBUG,"log"),ge.VERBOSE,"log"),ge.INFO,"info"),ge.WARN,"warn"),ge.ERROR,"error"),_e=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Te[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ie=function(){return g((function e(t){k(this,e),this.name=t,this._logLevel=Ee,this._logHandler=_e,this._userLogHandler=null}),[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ge))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?be[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.DEBUG].concat(t)),this._logHandler.apply(this,[this,ge.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ge.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.INFO].concat(t)),this._logHandler.apply(this,[this,ge.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.WARN].concat(t)),this._logHandler.apply(this,[this,ge.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.ERROR].concat(t)),this._logHandler.apply(this,[this,ge.ERROR].concat(t))}}])}();var Ce=new WeakMap,Se=new WeakMap,Ae=new WeakMap,De=new WeakMap,Ne=new WeakMap;var Oe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Se.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ae.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Le(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function xe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Me(this),n),Le(Ce.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Le(e.apply(Me(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Me(this),t].concat(r));return Ae.set(a,t.sort?t.sort():[t]),Le(a)}}function Re(e){return"function"==typeof e?xe(e):(e instanceof IDBTransaction&&function(e){if(!Se.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Se.set(e,t)}}(e),t=e,(ke||(ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Oe):e);var t}function Le(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(Le(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&Ce.set(e,t)})).catch((function(){})),Ne.set(n,t),n;var t,n;if(De.has(e))return De.get(e);var r=Re(e);return r!==e&&(De.set(e,r),Ne.set(r,e)),r}var Me=function(e){return Ne.get(e)};function Pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Le(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Le(s.result),e.oldVersion,e.newVersion,Le(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}var Ve=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],Ue=new Map;function je(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Ue.get(t))return Ue.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Fe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ve.includes(n))){var a=function(){var e=p(o().m((function e(t){var a,s,u,c,l,h,f=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:for(s=this.transaction(t,i?"readwrite":"readonly"),u=s.store,c=f.length,l=new Array(c>1?c-1:0),h=1;h<c;h++)l[h-1]=f[h];return r&&(u=u.index(l.shift())),e.n=1,Promise.all([(a=u)[n].apply(a,l),i&&s.done]);case 1:return e.a(2,e.v[0])}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ue.set(t,a),a}}}Oe=function(e){return i(i({},e),{},{get:function(t,n,r){return je(t,n)||e.get(t,n,r)},has:function(t,n){return!!je(t,n)||e.has(t,n)}})}(Oe);
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Be=function(){return g((function e(t){k(this,e),this.container=t}),[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}])}();var qe="@firebase/app",ze="0.13.1",Ke=new Ie("@firebase/app"),Ge="[DEFAULT]",He=(a(a(a(a(a(a(a(a(a(a(r={},qe,"fire-core"),"@firebase/app-compat","fire-core-compat"),"@firebase/analytics","fire-analytics"),"@firebase/analytics-compat","fire-analytics-compat"),"@firebase/app-check","fire-app-check"),"@firebase/app-check-compat","fire-app-check-compat"),"@firebase/auth","fire-auth"),"@firebase/auth-compat","fire-auth-compat"),"@firebase/database","fire-rtdb"),"@firebase/data-connect","fire-data-connect"),a(a(a(a(a(a(a(a(a(a(r,"@firebase/database-compat","fire-rtdb-compat"),"@firebase/functions","fire-fn"),"@firebase/functions-compat","fire-fn-compat"),"@firebase/installations","fire-iid"),"@firebase/installations-compat","fire-iid-compat"),"@firebase/messaging","fire-fcm"),"@firebase/messaging-compat","fire-fcm-compat"),"@firebase/performance","fire-perf"),"@firebase/performance-compat","fire-perf-compat"),"@firebase/remote-config","fire-rc"),a(a(a(a(a(a(a(a(r,"@firebase/remote-config-compat","fire-rc-compat"),"@firebase/storage","fire-gcs"),"@firebase/storage-compat","fire-gcs-compat"),"@firebase/firestore","fire-fst"),"@firebase/firestore-compat","fire-fst-compat"),"@firebase/ai","fire-vertex"),"fire-js","fire-js"),"firebase","fire-js-all")),Qe=new Map,We=new Map,Xe=new Map;function Ye(e,t){try{e.container.addComponent(t)}catch(n){Ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e){var t=e.name;if(Xe.has(t))return Ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);var n,r=l(Qe.values());try{for(r.s();!(n=r.n()).done;){Ye(n.value,e)}}catch(o){r.e(o)}finally{r.f()}var i,a=l(We.values());try{for(a.s();!(i=a.n()).done;){Ye(i.value,e)}}catch(o){a.e(o)}finally{a.f()}return!0}function Ze(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var $e=(a(a(a(a(a(a(a(a(a(a(j={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),"bad-app-name","Illegal App name: '{$appName}'"),"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),"app-deleted","Firebase App named '{$appName}' already deleted"),"server-app-deleted","Firebase Server App has been deleted"),"no-options","Need to provide options, when not being deployed to hosting via source."),"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),"invalid-log-argument","First argument to `onLog` must be null or a function."),"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),a(a(a(a(j,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),"finalization-registry-not-supported","FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry."),"invalid-server-app-environment","FirebaseServerApp is not for use in browser environments.")),et=new ue("app","Firebase",$e),tt=function(){return g((function e(t,n,r){var i=this;k(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ve("app",(function(){return i}),"PUBLIC"))}),[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}])}();function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==d(t)&&(t={name:t});var r=Object.assign({name:Ge,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!=typeof i||!i)throw et.create("bad-app-name",{appName:String(i)});if(n||(n=J()),!n)throw et.create("no-options");var a=Qe.get(i);if(a){if(le(n,a.options)&&le(r,a.config))return a;throw et.create("duplicate-app",{appName:i})}var o,s=new me(i),u=l(Xe.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var h=new tt(n,r,s);return Qe.set(i,h),h}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=Qe.get(e);if(!t&&e===Ge&&J())return nt();if(!t)throw et.create("no-app",{appName:e});return t}function it(e,t,n){var r,i=null!==(r=He[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ke.warn(s.join(" "))}Je(new ve("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var at="firebase-heartbeat-store",ot=null;function st(){return ot||(ot=Pe("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(at)}catch(n){console.warn(n)}}}).catch((function(e){throw et.create("idb-open",{originalErrorMessage:e.message})}))),ot}function ut(e){return ct.apply(this,arguments)}function ct(){return ct=p(o().m((function e(t){var n,r,i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,st();case 1:return n=e.v,r=n.transaction(at),e.n=2,r.objectStore(at).get(ft(t));case 2:return i=e.v,e.n=3,r.done;case 3:return e.a(2,i);case 4:e.p=4,(s=e.v)instanceof se?Ke.warn(s.message):(a=et.create("idb-get",{originalErrorMessage:null==s?void 0:s.message}),Ke.warn(a.message));case 5:return e.a(2)}}),e,null,[[0,4]])}))),ct.apply(this,arguments)}function lt(e,t){return ht.apply(this,arguments)}function ht(){return ht=p(o().m((function e(t,n){var r,i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,st();case 1:return r=e.v,i=r.transaction(at,"readwrite"),a=i.objectStore(at),e.n=2,a.put(n,ft(t));case 2:return e.n=3,i.done;case 3:e.n=5;break;case 4:e.p=4,(u=e.v)instanceof se?Ke.warn(u.message):(s=et.create("idb-set",{originalErrorMessage:null==u?void 0:u.message}),Ke.warn(s.message));case 5:return e.a(2)}}),e,null,[[0,4]])}))),ht.apply(this,arguments)}function ft(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var dt=function(){return g((function e(t){var n=this;k(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new gt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}),[{key:"triggerHeartbeat",value:(t=p(o().m((function e(){var t,n,r,i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=vt(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.n=2;break}return e.n=1,this._heartbeatsCachePromise;case 1:if(this._heartbeatsCache=e.v,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.n=2;break}return e.a(2);case 2:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.n=3;break}return e.a(2);case 3:this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>30&&(s=kt(this._heartbeatsCache.heartbeats),this._heartbeatsCache.heartbeats.splice(s,1));case 4:return e.a(2,this._storage.overwrite(this._heartbeatsCache));case 5:e.p=5,u=e.v,Ke.warn(u);case 6:return e.a(2)}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})},{key:"getHeartbeatsHeader",value:(e=p(o().m((function e(){var t,n,r,i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,null!==this._heartbeatsCache){e.n=1;break}return e.n=1,this._heartbeatsCachePromise;case 1:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.n=2;break}return e.a(2,"");case 2:if(n=vt(),r=pt(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,s=H(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.n=4;break}return this._heartbeatsCache.heartbeats=a,e.n=3,this._storage.overwrite(this._heartbeatsCache);case 3:e.n=5;break;case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 5:return e.a(2,s);case 6:return e.p=6,u=e.v,Ke.warn(u),e.a(2,"")}}),e,this,[[0,6]])}))),function(){return e.apply(this,arguments)})}]);var e,t}();function vt(){return(new Date).toISOString().substring(0,10)}function pt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=l(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),mt(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),mt(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var yt,gt=function(){return g((function e(t){k(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}),[{key:"runIndexedDBEnvironmentCheck",value:(r=p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:if(ae()){e.n=1;break}return e.a(2,!1);case 1:return e.a(2,oe().then((function(){return!0})).catch((function(){return!1})));case 2:return e.a(2)}}),e)}))),function(){return r.apply(this,arguments)})},{key:"read",value:(n=p(o().m((function e(){var t;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this._canUseIndexedDBPromise;case 1:if(e.v){e.n=2;break}return e.a(2,{heartbeats:[]});case 2:return e.n=3,ut(this.app);case 3:if(!(null==(t=e.v)?void 0:t.heartbeats)){e.n=4;break}return e.a(2,t);case 4:return e.a(2,{heartbeats:[]});case 5:return e.a(2)}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"overwrite",value:(t=p(o().m((function e(t){var n,r;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this._canUseIndexedDBPromise;case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.n=3,this.read();case 3:return r=e.v,e.a(2,lt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 4:return e.a(2)}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"add",value:(e=p(o().m((function e(t){var n,r;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this._canUseIndexedDBPromise;case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.n=3,this.read();case 3:return r=e.v,e.a(2,lt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(u(r.heartbeats),u(t.heartbeats))}));case 4:return e.a(2)}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n,r}();function mt(e){return H(JSON.stringify({version:2,heartbeats:e})).length}function kt(e){if(0===e.length)return-1;for(var t=0,n=e[0].date,r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */yt="",Je(new ve("platform-logger",(function(e){return new Be(e)}),"PRIVATE")),Je(new ve("heartbeat",(function(e){return new dt(e)}),"PRIVATE")),it(qe,ze,yt),it(qe,ze,"esm2017"),it("fire-js","");var wt,bt,Et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
            Copyright The Closure Library Authors.
            SPDX-License-Identifier: Apache-2.0
            */(function(){var e;
/** @license

             Copyright The Closure Library Authors.
             SPDX-License-Identifier: Apache-2.0
            */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,a=this.h,o=0;o<t;){if(0==a)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[a++]=e.charCodeAt(o++),a==this.blockSize){n(this,i),a=0;break}}else for(;o<t;)if(i[a++]=e[o++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return f(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=a(0),u=a(1),c=a(16777216);function l(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function f(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(u)}function d(e,t){return e.add(f(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function y(e,t){if(l(t))throw Error("division by zero");if(l(e))return new p(s,s);if(h(e))return t=y(f(e),t),new p(f(t.g),f(t.h));if(h(t))return t=y(e,f(t)),new p(f(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;0>=r.l(e);)n=g(n),r=g(r);var i=m(n,1),a=m(r,1);for(r=m(r,2),n=m(n,2);!l(r);){var c=a.add(r);0>=c.l(e)&&(i=i.add(n),a=c),r=m(r,1),n=m(n,1)}return t=d(e,i.j(t)),new p(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=o(n)).j(t);h(c)||0<c.l(e);)c=(a=o(n-=r)).j(t);l(a)&&(a=u),i=i.add(a),e=d(e,c)}return new p(i,e)}function g(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function m(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,a=[],o=0;o<i;o++)a[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(h(this))return-f(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(l(this))return"0";if(h(this))return"-"+f(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=y(n,t).g,a=((0<(n=d(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(l(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=d(this,e))?-1:l(e)?0:1},e.abs=function(){return h(this)?f(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,a=0;a<=t;a++){var o=i+(65535&this.i(a))+(65535&e.i(a)),s=(o>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=s>>>16,o&=65535,s&=65535,n[a]=s<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(l(this)||l(e))return s;if(h(this))return h(e)?f(this).j(f(e)):f(f(this).j(e));if(h(e))return f(this.j(f(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var u=this.i(i)>>>16,d=65535&this.i(i),p=e.i(a)>>>16,y=65535&e.i(a);n[2*i+2*a]+=d*y,v(n,2*i+2*a),n[2*i+2*a+1]+=u*y,v(n,2*i+2*a+1),n[2*i+2*a+1]+=d*p,v(n,2*i+2*a+1),n[2*i+2*a+2]+=u*p,v(n,2*i+2*a+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return y(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,bt=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=s,a=0;a<t.length;a+=8){var u=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+u),n);8>u?(u=o(Math.pow(n,u)),i=i.j(u).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},wt=r}).apply(void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Tt,_t,It,Ct,St,At,Dt,Nt,Ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
            Copyright The Closure Library Authors.
            SPDX-License-Identifier: Apache-2.0
            */(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var r=function(e){e=["object"==("undefined"==typeof globalThis?"undefined":d(globalThis))&&globalThis,e,"object"==("undefined"==typeof window?"undefined":d(window))&&window,"object"==("undefined"==typeof self?"undefined":d(self))&&self,"object"==d(Ot)&&Ot];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,t){if(t)e:{var i=r;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(t=t(a=i[e=e[e.length-1]]))!=a&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));
/** @license

             Copyright The Closure Library Authors.
             SPDX-License-Identifier: Apache-2.0
            */
var i=i||{},a=this||self;function o(e){var t=d(e);return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=d(e);return"object"==t&&null!=e||"function"==t}function u(e,t,n){return e.call.apply(e.bind,arguments)}function h(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function f(e,t,n){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h).apply(null,arguments)}function v(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function p(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function y(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(o(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var s=0;s<a;s++)e[i+s]=r[s]}else e.push(r)}}var E=function(){return g((function e(t,n){k(this,e),this.i=t,this.j=n,this.h=0,this.g=null}),[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}])}();function T(e){return/^[\s\xa0]*$/.test(e)}function _(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function I(e){return I[" "](e),e}I[" "]=function(){};var C=!(-1==_().indexOf("Gecko")||-1!=_().toLowerCase().indexOf("webkit")&&-1==_().indexOf("Edge")||-1!=_().indexOf("Trident")||-1!=_().indexOf("MSIE")||-1!=_().indexOf("Edge"));function S(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function A(e){var t={};for(var n in e)t[n]=e[n];return t}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<D.length;a++)n=D[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function O(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x(e){a.setTimeout((function(){throw e}),0)}function R(){var e=U,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var L,M=function(){return g((function e(){k(this,e),this.h=this.g=null}),[{key:"add",value:function(e,t){var n=P.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}])}(),P=new E((function(){return new V}),(function(e){return e.reset()})),V=function(){return g((function e(){k(this,e),this.next=this.g=this.h=null}),[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}])}(),F=!1,U=new M,j=function(){var e=a.Promise.resolve(void 0);L=function(){e.then(B)}},B=function(){for(var e;e=R();){try{e.h.call(e.g)}catch(n){x(n)}var t=P;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function q(){this.s=this.s,this.C=this.C}function z(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},z.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};a.addEventListener("test",n,t),a.removeEventListener("test",n,t)}catch(n){}return e}();function G(e,t){if(z.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(C){e:{try{I(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:H[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.aa.h.call(this)}}p(G,z);var H={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),W=0;function X(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++W,this.da=this.fa=!1}function Y(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function J(e){this.src=e,this.g={},this.h=0}function Z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Y(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}J.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new X(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ne(e,t[a],n,r,i);return null}return n=ce(n),e&&e[Q]?e.K(t,n,!!s(r)&&!!r.capture,i):function(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=s(i)?!!i.capture:!!i,u=se(e);if(u||(e[ee]=u=new J(e)),n=u.add(t,n,r,o,a),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=oe;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)K||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function re(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)re(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ce(n),e&&e[Q]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(a=e.g[t],n,r,i))&&(Y(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=se(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&ie(n))}function ie(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[Q])Z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=se(t))?(Z(n,e),0==n.h&&(n.src=null,t[ee]=null)):Y(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function oe(e,t){if(e.da)e=!0;else{t=new G(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ie(e),e=n.call(r,t)}return e}function se(e){return(e=e[ee])instanceof J?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(e){return"function"==typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function le(){q.call(this),this.i=new J(this),this.M=this,this.F=null}function he(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new z(t,e);else if(t instanceof z)t.target=t.target||e;else{var i=t;N(t=new z(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=fe(o,r,!0,t)&&i}if(i=fe(o=t.g=e,r,!0,t)&&i,i=fe(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=fe(o=t.g=n[a],r,!1,t)&&i}function fe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.fa&&Z(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function de(e,t,n){if("function"==typeof e)n&&(e=f(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=f(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function ve(e){e.g=de((function(){e.g=null,e.i&&(e.i=!1,ve(e))}),e.l);var t=e.h;e.h=null,e.m.apply(null,t)}p(le,q),le.prototype[Q]=!0,le.prototype.removeEventListener=function(e,t,n,r){re(this,e,t,n,r)},le.prototype.N=function(){if(le.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Y(n[r]);delete t.g[e],t.h--}}this.F=null},le.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},le.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var pe=function(e){function n(e,t){var r;return k(this,n),(r=w(this,n)).m=e,r.l=t,r.h=null,r.i=!1,r.g=null,r}return b(n,e),g(n,[{key:"j",value:function(e){this.h=arguments,this.g?this.i=!0:ve(this)}},{key:"N",value:function(){t(n,"N",this,3)([]),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}])}(q);function ye(e){q.call(this),this.h=e,this.g={}}p(ye,q);var ge=[];function me(e){S(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ie(e)}),e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),me(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=a.JSON.stringify,we=a.JSON.parse,be=function(){return g((function e(){k(this,e)}),[{key:"stringify",value:function(e){return a.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return a.JSON.parse(e,void 0)}}])}();function Ee(){}function Te(e){return e.h||(e.h=e.i())}function _e(){}Ee.prototype.h=null;var Ie={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ce(){z.call(this,"d")}function Se(){z.call(this,"c")}p(Ce,z),p(Se,z);var Ae={},De=null;function Ne(){return De=De||new le}function Oe(e){z.call(this,Ae.La,e)}function xe(e){var t=Ne();he(t,new Oe(t))}function Re(e,t){z.call(this,Ae.STAT_EVENT,e),this.stat=t}function Le(e){var t=Ne();he(t,new Re(t,e))}function Me(e,t){z.call(this,Ae.Ma,e),this.size=t}function Pe(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}function Ve(){this.g=!0}function Fe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ke(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Ae.La="serverreachability",p(Oe,z),Ae.STAT_EVENT="statevent",p(Re,z),Ae.Ma="timingevent",p(Me,z),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var Ue,je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function qe(){}function ze(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}p(qe,Ee),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},Ue=new qe;var Ge={},He={};function Qe(e,t,n){e.L=1,e.v=kt(vt(t)),e.m=n,e.P=!0,We(e,null)}function We(e,t){e.F=Date.now(),Je(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),qt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ke,e.g=Nn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new pe(f(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ge[0]=i.toString()),i=ge);for(var a=0;a<i.length;a++){var o=ne(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xe(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ye(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?He:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?He:(t=t.slice(r,r+n),e.C=r+n,t))}function Je(e){e.S=Date.now()+e.I,Ze(e,e.I)}function Ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pe(f(e.ba,e),t)}function $e(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function et(e){0==e.j.G||e.J||In(e.j,e)}function tt(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,me(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function nt(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||st(n.h,e)))if(!e.K&&st(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;_n(n),vn(n)}bn(n),Le(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Pe(f(n.Za,n),6e3));if(1>=ot(n.h)&&n.ca){try{n.ca()}catch(a){}n.ca=void 0}}else Sn(n,11)}else if((e.K||n.g==e)&&_n(n),!T(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.K=a[1],n.ia=a[2];var o=a[3];null!=o&&(n.la=o,n.j.info("VER="+n.la));var s=a[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(ut(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.ya=d,mt(r.I,r.D,d))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var v=e;if((r=n).qa=Dn(r,r.J?r.ia:null,r.W),v.K){ct(r.h,v);var p=v,y=r.L;y&&(p.I=y),p.B&&($e(p),Je(p)),r.g=v}else wn(r);0<n.i.length&&yn(n)}else"stop"!=a[0]&&"close"!=a[0]||Sn(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Sn(n,7):dn(n):"noop"!=a[0]&&n.l&&n.l.ta(a),n.v=0)}xe()}catch(a){}}ze.prototype.ca=function(e){e=e.target;var t=this.M;t&&3==cn(e)?t.j():this.Y(e)},ze.prototype.Y=function(e){try{if(e==this.g)e:{var t=cn(this.g),n=this.g.Ba();this.g.Z();if(!(3>t)&&(3!=t||this.g&&(this.h.h||this.g.oa()||ln(this.g)))){this.J||4!=t||7==n||xe(),$e(this);var r=this.g.Z();this.X=r;t:if(Xe(this)){var i=ln(this.g);e="";var o=i.length,s=4==cn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tt(this),et(this);var u="";break t}this.h.i=new a.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:!(s&&n==o-1)});i.length=0,this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.oa();if(this.o=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.i,this.u,this.A,this.l,this.R,t,r),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(c)){var h=c;break t}}h=null}if(!(r=h)){this.o=!1,this.s=3,Le(12),tt(this),et(this);break e}Fe(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nt(this,r)}if(this.P){var f;for(r=!0;!this.J&&this.C<u.length;){if((f=Ye(this,u))==He){4==t&&(this.s=4,Le(14),r=!1),Fe(this.i,this.l,null,"[Incomplete Response]");break}if(f==Ge){this.s=4,Le(15),Fe(this.i,this.l,u,"[Invalid Chunk]"),r=!1;break}Fe(this.i,this.l,f,null),nt(this,f)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=t||0!=u.length||this.h.h||(this.s=1,Le(16),r=!1),this.o=this.o&&r,r){if(0<u.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+u.length),En(d),d.M=!0,Le(11))}}else Fe(this.i,this.l,u,"[Invalid Chunked Response]"),tt(this),et(this)}else Fe(this.i,this.l,u,null),nt(this,u);4==t&&tt(this),this.o&&!this.J&&(4==t?In(this.j,this):(this.o=!1,Je(this)))}else(function(e){var t={};e=(e.g&&2<=cn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!T(e[n])){var r=O(e[n]),i=r[0];if("string"==typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),tt(this),et(this)}}}catch(t){}},ze.prototype.cancel=function(){this.J=!0,tt(this)},ze.prototype.ba=function(){this.B=null;var e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(xe(),Le(17)),tt(this),this.s=2,et(this)):Ze(this,this.S-e)};var rt=g((function e(t,n){k(this,e),this.g=t,this.map=n}));function it(e){this.l=e||10,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ot(e){return e.h?1:e.g?e.g.size:0}function st(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function ct(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=l(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return y(e.i)}function ht(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(o(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}it.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=l(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,pt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Ft;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),gt(this,n),this.m=e.m}else e&&(t=String(e).match(ft))?(this.h=!1,pt(this,t[1]||"",!0),this.o=wt(t[2]||""),this.g=wt(t[3]||"",!0),yt(this,t[4]),this.l=wt(t[5]||"",!0),gt(this,t[6]||"",!0),this.m=wt(t[7]||"")):(this.h=!1,this.i=new Ft(null,this.h))}function vt(e){return new dt(e)}function pt(e,t,n){e.j=n?wt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function gt(e,t,n){t instanceof Ft?(e.i=t,function(e,t){t&&!e.j&&(Ut(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(jt(this,t),qt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=bt(t,Pt)),e.i=new Ft(t,e.h))}function mt(e,t,n){e.i.set(t,n)}function kt(e){return mt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bt(t,Rt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,Rt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?Mt:Lt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,Vt)),e.join("")};var xt,Rt=/[#\/\?@]/g,Lt=/[#\?:]/g,Mt=/[#\?]/g,Pt=/[#\?@]/g,Vt=/#/g;function Ft(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ut(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function jt(e,t){Ut(e),t=zt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Bt(e,t){return Ut(e),t=zt(e,t),e.g.has(t)}function qt(e,t,n){jt(e,t),0<n.length&&(e.i=null,e.g.set(zt(e,t),y(n)),e.h+=n.length)}function zt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(a){}}function Gt(){this.g=new be}function Ht(e,t,n){var r=n||"";try{ht(e,(function(e,n){var i=e;s(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Wt(e,t){le.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Xt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Yt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Jt(e)}function Jt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Zt(e){var t="";return S(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function $t(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Zt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):mt(e,t,n))}function en(e){le.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ft.prototype).add=function(e,t){Ut(this),this.i=null,e=zt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ut(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Ut(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},e.V=function(e){Ut(this);var t=[];if("string"==typeof e)Bt(this,e)&&(t=t.concat(this.g.get(zt(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ut(this),this.i=null,Bt(this,e=zt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")},p(Qt,Ee),Qt.prototype.g=function(){return new Wt(this.l,this.j)},Qt.prototype.i=(xt={},function(){return xt}),p(Wt,le),(e=Wt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Jt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Jt(this)),this.g&&(this.readyState=3,Jt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yt(this):Jt(this),3==this.readyState&&Xt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Yt(this))},e.Qa=function(e){this.g&&(this.response=e,Yt(this))},e.ga=function(){this.g&&Yt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),p(en,le);var tn=/^https?$/i,nn=["POST","PUT"];function rn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,an(e),sn(e)}function an(e){e.A||(e.A=!0,he(e,"complete"),he(e,"error"))}function on(e){if(e.h&&void 0!==i&&(!e.v[1]||4!=cn(e)||2!=e.Z()))if(e.u&&4==cn(e))de(e.Ea,0,e);else if(he(e,"readystatechange"),4==cn(e)){e.h=!1;try{var t,n=e.Z();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var o;if(o=0===n){var s=String(e.D).match(ft)[1]||null;!s&&a.self&&a.self.location&&(s=a.self.location.protocol.slice(0,-1)),o=!tn.test(s?s.toLowerCase():"")}t=o}if(t)he(e,"complete"),he(e,"success");else{e.m=6;try{var u=2<cn(e)?e.g.statusText:""}catch(c){u=""}e.l=u+" ["+e.Z()+"]",an(e)}}finally{sn(e)}}}function sn(e,t){if(e.g){un(e);var n=e.g,r=e.v[0]?function(){}:null;e.g=null,e.v=null,t||he(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function un(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function cn(e){return e.g?e.g.readyState:0}function ln(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function hn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function fn(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hn("baseRetryDelayMs",5e3,e),this.cb=hn("retryDelaySeedMs",1e4,e),this.Wa=hn("forwardChannelMaxRetries",2,e),this.wa=hn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new it(e&&e.concurrentRequestLimit),this.Da=new Gt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function dn(e){if(pn(e),3==e.G){var t=e.U++,n=vt(e.I);if(mt(n,"SID",e.K),mt(n,"RID",t),mt(n,"TYPE","terminate"),mn(e,n),(t=new ze(e,e.j,t)).L=2,t.v=kt(vt(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Je(t)}An(e)}function vn(e){e.g&&(En(e),e.g.cancel(),e.g=null)}function pn(e){vn(e),e.u&&(a.clearTimeout(e.u),e.u=null),_n(e),e.h.cancel(),e.s&&("number"==typeof e.s&&a.clearTimeout(e.s),e.s=null)}function yn(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||j(),F||(L(),F=!0),U.add(t,e),e.B=0}}function gn(e,t){var n;n=t?t.l:e.U++;var r=vt(e.I);mt(r,"SID",e.K),mt(r,"RID",n),mt(r,"AID",e.T),mn(e,r),e.m&&e.o&&$t(r,e.m,e.o),n=new ze(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=kn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Qe(n,r,t)}function mn(e,t){e.H&&S(e.H,(function(e,n){mt(t,n,e)})),e.l&&ht({},(function(e,n){mt(t,n,e)}))}function kn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?f(e.l.Na,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Ht(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function wn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||j(),F||(L(),F=!0),U.add(t,e),e.v=0}}function bn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Pe(f(e.Fa,e),Cn(e,e.v)),e.v++,!0)}function En(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function Tn(e){e.g=new ze(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);mt(t,"RID","rpc"),mt(t,"SID",e.K),mt(t,"AID",e.T),mt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&mt(t,"TO",e.ja),mt(t,"TYPE","xmlhttp"),mn(e,t),e.m&&e.o&&$t(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=kt(vt(t)),n.m=null,n.P=!0,We(n,e)}function _n(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function In(e,t){var n=null;if(e.g==t){_n(e),En(e),e.g=null;var r=2}else{if(!st(e.h,t))return;n=t.D,ct(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;he(r=Ne(),new Me(r,n)),yn(e)}else wn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(ot(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Pe(f(e.Ga,e,t),Cn(e,e.B)),e.B++,0)))}(e,t)||2==r&&bn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Sn(e,5);break;case 4:Sn(e,10);break;case 3:Sn(e,6);break;default:Sn(e,2)}}function Cn(e,t){var n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Sn(e,t){if(e.j.info("Error code "+t),2==t){var n=f(e.fb,e),r=e.Xa,i=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||pt(r,"https"),kt(r),i?function(e,t){var n=new Ve;if(a.Image){var r=new Image;r.onload=v(Kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=v(Kt,n,"TestLoadImage: error",!1,t,r),r.onabort=v(Kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=v(Kt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ve;var n=new AbortController,r=setTimeout((function(){n.abort(),Kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((function(e){clearTimeout(r),e.ok?Kt(0,0,!0,t):Kt(0,0,!1,t)})).catch((function(){clearTimeout(r),Kt(0,0,!1,t)}))}(r.toString(),n)}else Le(2);e.G=0,e.l&&e.l.sa(t),An(e),pn(e)}function An(e){if(e.G=0,e.ka=[],e.l){var t=lt(e.h);0==t.length&&0==e.i.length||(m(e.ka,t),m(e.ka,e.i),e.h.i.length=0,y(e.i),e.i.length=0),e.l.ra()}}function Dn(e,t,n){var r=n instanceof dt?vt(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new dt(null);r&&pt(o,r),t&&(o.g=t),i&&yt(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&mt(r,n,t),mt(r,"VER",e.la),mn(e,r),r}function Nn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new en(new Qt({eb:n})):new en(e.pa)).Ha(e.J),t}function On(){}function xn(){}function Rn(e,t){le.call(this),this.g=new fn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!T(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pn(this)}function Ln(e){Ce.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Mn(){Se.call(this),this.status=1}function Pn(e){this.g=e}(e=en.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ue.g(),this.v=this.o?Te(this.o):Te(Ue),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(u){return void rn(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o,s=l(r.keys());try{for(s.s();!(o=s.n()).done;){var u=o.value;n.set(u,r.get(u))}}catch(g){s.e(g)}finally{s.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nn,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var h,d=l(n);try{for(d.s();!(h=d.n()).done;){var v=c(h.value,2),p=v[0],y=v[1];this.g.setRequestHeader(p,y)}}catch(g){d.e(g)}finally{d.f()}this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{un(this),this.u=!0,this.g.send(e),this.u=!1}catch(u){rn(this,u)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,he(this,"complete"),he(this,"abort"),sn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sn(this,!0)),en.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?on(this):this.bb())},e.bb=function(){on(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch(xt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(xt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),we(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=fn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Le(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Dn(this,null,this.W),yn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ze(this,this.j,e),n=this.o;if(this.S&&(n?N(n=A(n),this.S):n=this.S),null!==this.m||this.O||(t.H=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=kn(this,t,r),mt(i=vt(this.I),"RID",e),mt(i,"CVER",22),this.D&&mt(i,"X-HTTP-Session-Id",this.D),mn(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Zt(n)))+"&"+r:this.m&&$t(i,this.m,n)),ut(this.h,t),this.Ua&&mt(i,"TYPE","init"),this.P?(mt(i,"$req",r),mt(i,"SID","null"),t.T=!0,Qe(t,i,null)):Qe(t,i,r),this.G=2}}else 3==this.G&&(e?gn(this,e):0==this.i.length||at(this.h)||gn(this))},e.Fa=function(){if(this.u=null,Tn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Pe(f(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),vn(this),Tn(this))},e.Za=function(){null!=this.C&&(this.C=null,vn(this),bn(this),Le(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=On.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},xn.prototype.g=function(e,t){return new Rn(e,t)},p(Rn,le),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){dn(this.g)},Rn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ke(e),e=n);t.i.push(new rt(t.Ya++,e)),3==t.G&&yn(t)},Rn.prototype.N=function(){this.g.l=null,delete this.j,dn(this.g),delete this.g,Rn.aa.N.call(this)},p(Ln,Ce),p(Mn,Se),p(Pn,On),Pn.prototype.ua=function(){he(this.g,"a")},Pn.prototype.ta=function(e){he(this.g,new Ln(e))},Pn.prototype.sa=function(e){he(this.g,new Mn)},Pn.prototype.ra=function(){he(this.g,"b")},xn.prototype.createWebChannel=xn.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,Nt=function(){return new xn},Dt=function(){return Ne()},At=Ae,St={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Ct=je,Be.COMPLETE="complete",It=Be,_e.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",le.prototype.listen=le.prototype.K,_t=_e,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,Tt=en}).apply(void 0!==Ot?Ot:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var xt="@firebase/firestore",Rt="4.7.17",Lt=function(){return g((function e(t){k(this,e),this.uid=t}),[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Mt="11.9.0",Pt=new Ie("@firebase/firestore");
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Vt(){return Pt.logLevel}function Ft(e){if(Pt.logLevel<=ge.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bt);Pt.debug.apply(Pt,["Firestore (".concat(Mt,"): ").concat(e)].concat(u(i)))}}function Ut(e){if(Pt.logLevel<=ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bt);Pt.error.apply(Pt,["Firestore (".concat(Mt,"): ").concat(e)].concat(u(i)))}}function jt(e){if(Pt.logLevel<=ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bt);Pt.warn.apply(Pt,["Firestore (".concat(Mt,"): ").concat(e)].concat(u(i)))}}function Bt(e){if("string"==typeof e)return e;try{
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function qt(e,t,n){var r="Unexpected state";"string"==typeof t?r=t:n=t,zt(e,r,n)}function zt(e,t,n){var r="FIRESTORE (".concat(Mt,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ut(r),new Error(r)}function Kt(e,t,n,r){var i="Unexpected state";"string"==typeof n?i=n:r=n,e||zt(t,i,r)}function Gt(e,t){return e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qt=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t,[e,n])).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return b(t,e),g(t)}(se),Wt=g((function e(){var t=this;k(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Xt=g((function e(t,n){k(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Yt=function(){return g((function e(){k(this,e)}),[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lt.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}])}(),Jt=function(){return g((function e(t){k(this,e),this.token=t,this.changeListener=null}),[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}])}(),Zt=function(){return g((function e(t){k(this,e),this.t=t,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}),[{key:"start",value:function(e,t){var n=this;Kt(void 0===this.o,42304);var r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Wt;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Wt,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=a;e.enqueueRetryable(p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,t.promise;case 1:return e.n=2,i(n.currentUser);case 2:return e.a(2)}}),e)}))))},u=function(e){Ft("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.o&&(n.auth.addAuthTokenListener(n.o),s())};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wt)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Kt("string"==typeof n.accessToken,31837,{l:n}),new Xt(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Kt(null===e||"string"==typeof e,2055,{h:e}),new Lt(e)}}])}(),$t=function(){return g((function e(t,n,r){k(this,e),this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}),[{key:"R",value:function(){return this.I?this.I():null}},{key:"headers",get:function(){this.A.set("X-Goog-AuthUser",this.P);var e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}])}(),en=function(){return g((function e(t,n,r){k(this,e),this.P=t,this.T=n,this.I=r}),[{key:"getToken",value:function(){return Promise.resolve(new $t(this.P,this.T,this.I))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lt.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}])}(),tn=g((function e(t){k(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),nn=function(){return g((function e(t,n){var r;k(this,e),this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(r=t)&&void 0!==r.settings&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}),[{key:"start",value:function(e,t){var n=this;Kt(void 0===this.o,3512);var r=function(e){null!=e.error&&Ft("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.m;return n.m=e.token,Ft("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ft("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.o&&n.appCheck.addTokenListener(n.o)};this.V.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.V.getImmediate({optional:!0});e?i(e):Ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this;if(this.p)return Promise.resolve(new tn(this.p));var t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Kt("string"==typeof t.token,44558,{tokenResult:t}),e.m=t.token,new tn(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function rn(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function an(){return new TextEncoder}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var on=function(){return g((function e(){k(this,e)}),null,[{key:"newId",value:function(){for(var e=62*Math.floor(256/62),t="";t.length<20;)for(var n=rn(40),r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return t}}])}();function sn(e,t){return e<t?-1:e>t?1:0}function un(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return sn(r,i);var a=an(),o=ln(a.encode(cn(e,n)),a.encode(cn(t,n)));return 0!==o?o:sn(r,i)}n+=r>65535?2:1}return sn(e.length,t.length)}function cn(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function ln(e,t){for(var n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return sn(e[n],t[n]);return sn(e.length,t.length)}function hn(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var fn=-62135596800,dn=1e6,vn=function(){function e(t,n){if(k(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Qt(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qt(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<fn)throw new Qt(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qt(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/dn}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds-fn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*dn))}}])}(),pn=function(){function e(t){k(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new vn(0,0))}},{key:"max",value:function(){return new e(new vn(253402300799,999999999))}}])}(),yn="__name__",gn=function(){function e(t,n,r){k(this,e),void 0===n?n=0:n>t.length&&qt(637,{offset:n,range:t.length}),void 0===r?r=t.length-n:r>t.length-n&&qt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var a=e.compareSegments(t.get(i),n.get(i));if(0!==a)return a}return sn(t.length,n.length)}},{key:"compareSegments",value:function(t,n){var r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):un(t,n)}},{key:"isNumericId",value:function(e){return e.startsWith("__id")&&e.endsWith("__")}},{key:"extractNumericId",value:function(e){return wt.fromString(e.substring(4,e.length-2))}}])}(),mn=function(e){function t(){return k(this,t),w(this,t,arguments)}return b(t,e),g(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"toUriEncodedString",value:function(){return this.toArray().map(encodeURIComponent).join("/")}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter((function(e){return e.length>0}))))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}])}(gn),kn=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wn=function(e){function t(){return k(this,t),w(this,t,arguments)}return b(t,e),g(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&this.get(0)===yn}}],[{key:"isValidIdentifier",value:function(e){return kn.test(e)}},{key:"keyField",value:function(){return new t([yn])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Qt(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Qt(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Qt(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}])}(gn),bn=function(){function e(t){k(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===mn.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(mn.fromString(t))}},{key:"fromName",value:function(t){return new e(mn.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(mn.emptyPath())}},{key:"comparator",value:function(e,t){return mn.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new mn(t.slice()))}}])}();function En(e){return new Tn(e.readTime,e.key,-1)}var Tn=function(){function e(t,n,r){k(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e(pn.min(),bn.empty(),-1)}},{key:"max",value:function(){return new e(pn.max(),bn.empty(),-1)}}])}();function _n(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=bn.comparator(e.documentKey,t.documentKey))?n:sn(e.largestBatchId,t.largestBatchId)
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var In=function(){return g((function e(){k(this,e),this.onCommittedListeners=[]}),[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Cn(e){return Sn.apply(this,arguments)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Sn(){return(Sn=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:if(t.code===Ht.FAILED_PRECONDITION&&"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."===t.message){e.n=1;break}throw t;case 1:Ft("LocalStore","Unexpectedly lost primary lease");case 2:return e.a(2)}}),e)})))).apply(this,arguments)}var An=function(){function e(t){var n=this;k(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=l(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){var i=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){!0===t()?n().next((function(){i()}),r):e()}));i()}))}}])}();function Dn(e){return"IndexedDbTransactionError"===e.name}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Nn=function(){return g((function e(t,n){var r=this;k(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ue(e)},this.ce=function(e){return n.writeSequenceNumber(e)})}),[{key:"ue",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ce&&this.ce(e),e}}])}();Nn.le=-1;function On(e){return null==e}function xn(e){return 0===e&&1/e==-1/0}function Rn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function Ln(e){return e+""}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Mn(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pn(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Fn=function(){function e(t,n){k(this,e),this.comparator=t,this.root=n||jn.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,jn.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jn.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Un(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Un(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Un(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Un(this.root,e,this.comparator,!0)}}])}(),Un=function(){return g((function e(t,n,r,i){k(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}),[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}])}(),jn=function(){function e(t,n,r,i,a){k(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});var e=this.left.check();if(e!==this.right.check())throw qt(27949);return e+(this.isRed()?0:1)}}])}();jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1,jn.EMPTY=new(function(){return g((function e(){k(this,e),this.size=0}),[{key:"key",get:function(){throw qt(57766)}},{key:"value",get:function(){throw qt(16141)}},{key:"color",get:function(){throw qt(16727)}},{key:"left",get:function(){throw qt(29726)}},{key:"right",get:function(){throw qt(36894)}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jn(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}])}());
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Bn=function(){function e(t){k(this,e),this.comparator=t,this.data=new Fn(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new qn(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new qn(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}])}(),qn=function(){return g((function e(t){k(this,e),this.iter=t}),[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}])}(),zn=function(){function e(t){k(this,e),this.fields=t,t.sort(wn.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new Bn(wn.comparator),i=l(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=l(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=l(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return hn(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}])}(),Kn=function(e){function t(){var e;return k(this,t),(e=w(this,t,arguments)).name="Base64DecodeError",e}return b(t,e),g(t)}(E(Error)),Gn=function(){function e(t){k(this,e),this.binaryString=t}return g(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return sn(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Kn("Invalid base64 string: "+e):e}}(t);return new e(n)}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}])}();Gn.EMPTY_BYTE_STRING=new Gn("");var Hn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(e){if(Kt(!!e,39018),"string"==typeof e){var t=0,n=Hn.exec(e);if(Kt(!!n,46558,{timestamp:e}),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wn(e.seconds),nanos:Wn(e.nanos)}}function Wn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xn(e){return"string"==typeof e?Gn.fromBase64String(e):Gn.fromUint8Array(e)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Yn="server_timestamp",Jn="__type__",Zn="__previous_value__",$n="__local_write_time__";function er(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Jn])||void 0===n?void 0:n.stringValue)===Yn}function tr(e){var t=e.mapValue.fields[Zn];return er(t)?tr(t):t}function nr(e){var t=Qn(e.mapValue.fields[$n].timestampValue);return new vn(t.seconds,t.nanos)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var rr=g((function e(t,n,r,i,a,o,s,u,c,l){k(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=l})),ir="(default)",ar=function(){function e(t,n){k(this,e),this.projectId=t,this.database=n||ir}return g(e,[{key:"isDefaultDatabase",get:function(){return this.database===ir}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}])}(),or="__type__",sr="__max__",ur={},cr="__vector__",lr="value";function hr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?er(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===sr}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[or])||void 0===n?void 0:n.stringValue)===cr}(e)?10:11:qt(28295,{value:e})}function fr(e,t){if(e===t)return!0;var n=hr(e);if(n!==hr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nr(e).isEqual(nr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Qn(e.timestampValue),r=Qn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xn(e.bytesValue).isEqual(Xn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wn(e.geoPointValue.latitude)===Wn(t.geoPointValue.latitude)&&Wn(e.geoPointValue.longitude)===Wn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wn(e.integerValue)===Wn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Wn(e.doubleValue),r=Wn(t.doubleValue);return n===r?xn(n)===xn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hn(e.arrayValue.values||[],t.arrayValue.values||[],fr);case 10:case 11:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Mn(n)!==Mn(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fr(n[i],r[i])))return!1;return!0}(e,t);default:return qt(52216,{left:e})}}function dr(e,t){return void 0!==(e.values||[]).find((function(e){return fr(e,t)}))}function vr(e,t){if(e===t)return 0;var n=hr(e),r=hr(t);if(n!==r)return sn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sn(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Wn(e.integerValue||e.doubleValue),r=Wn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return pr(e.timestampValue,t.timestampValue);case 4:return pr(nr(e),nr(t));case 5:return un(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Xn(e),r=Xn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=sn(n[i],r[i]);if(0!==a)return a}return sn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=sn(Wn(e.latitude),Wn(t.latitude));return 0!==n?n:sn(Wn(e.longitude),Wn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yr(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a,o=e.fields||{},s=t.fields||{},u=null===(n=o[lr])||void 0===n?void 0:n.arrayValue,c=null===(r=s[lr])||void 0===r?void 0:r.arrayValue,l=sn((null===(i=null==u?void 0:u.values)||void 0===i?void 0:i.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==l?l:yr(u,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ur&&t===ur)return 0;if(e===ur)return 1;if(t===ur)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=un(r[o],a[o]);if(0!==s)return s;var u=vr(n[r[o]],i[a[o]]);if(0!==u)return u}return sn(r.length,a.length)}(e.mapValue,t.mapValue);default:throw qt(23264,{Pe:n})}}function pr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return sn(e,t);var n=Qn(e),r=Qn(t),i=sn(n.seconds,r.seconds);return 0!==i?i:sn(n.nanos,r.nanos)}function yr(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=vr(n[i],r[i]);if(a)return a}return sn(n.length,r.length)}function gr(e){return mr(e)}function mr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Qn(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return bn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=l(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=mr(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=l(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(mr(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):qt(61005,{value:e})}function kr(e){switch(hr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:var t=tr(e);return t?16+kr(t):16;case 5:return 2*e.stringValue.length;case 6:return Xn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((function(e,t){return e+kr(t)}),0)}(e.arrayValue);case 10:case 11:return function(e){var t=0;return Pn(e.fields,(function(e,n){t+=e.length+kr(n)})),t}(e.mapValue);default:throw qt(13486,{value:e})}}function wr(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function br(e){return!!e&&"integerValue"in e}function Er(e){return!!e&&"arrayValue"in e}function Tr(e){return!!e&&"nullValue"in e}function _r(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ir(e){return!!e&&"mapValue"in e}function Cr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==d(e.timestampValue))return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Pn(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Cr(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cr(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Sr=function(){function e(t){k(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ir(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cr(t)}},{key:"setAll",value:function(e){var t=this,n=wn.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Cr(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ir(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return fr(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ir(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Pn(t,(function(t,n){return e[t]=n}));var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Cr(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}])}();function Ar(e){var t=[];return Pn(e.fields,(function(e,n){var r=new wn([e]);if(Ir(n)){var i=Ar(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=l(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new zn(t)
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var Dr=function(){function e(t,n,r,i,a,o,s){k(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(pn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=pn.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,pn.min(),pn.min(),pn.min(),Sr.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,pn.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,pn.min(),pn.min(),Sr.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,pn.min(),pn.min(),Sr.empty(),2)}}])}(),Nr=g((function e(t,n){k(this,e),this.position=t,this.inclusive=n}));
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Or(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?bn.comparator(bn.fromName(o.referenceValue),n.key):vr(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function xr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!fr(e.position[n],t.position[n]))return!1;return!0}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Rr=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";k(this,e),this.field=t,this.dir=n}));function Lr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Mr=g((function e(){k(this,e)})),Pr=function(e){function t(e,n,r){var i;return k(this,t),(i=w(this,t)).field=e,i.op=n,i.value=r,i}return b(t,e),g(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(vr(t,this.value)):null!==t&&hr(this.value)===hr(t)&&this.matchesComparison(vr(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qt(47266,{operator:this.op})}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new zr(e,n,r):"array-contains"===n?new Qr(e,r):"in"===n?new Wr(e,r):"not-in"===n?new Xr(e,r):"array-contains-any"===n?new Yr(e,r):new t(e,n,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Kr(e,n):new Gr(e,n)}}])}(Mr),Vr=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t)).filters=e,r.op=n,r.Te=null,r}return b(t,e),g(t,[{key:"matches",value:function(e){return Fr(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.Te||(this.Te=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.Te}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,n){return new t(e,n)}}])}(Mr);function Fr(e){return"and"===e.op}function Ur(e){return function(e){var t,n=l(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Vr)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}(e)&&Fr(e)}function jr(e){if(e instanceof Pr)return e.field.canonicalString()+e.op.toString()+gr(e.value);if(Ur(e))return e.filters.map((function(e){return jr(e)})).join(",");var t=e.filters.map((function(e){return jr(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Br(e,t){return e instanceof Pr?function(e,t){return t instanceof Pr&&e.op===t.op&&e.field.isEqual(t.field)&&fr(e.value,t.value)}(e,t):e instanceof Vr?function(e,t){return t instanceof Vr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Br(n,t.filters[r])}),!0)}(e,t):void qt(19439)}function qr(e){return e instanceof Pr?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(gr(e.value))}(e):e instanceof Vr?function(e){return e.op.toString()+" {"+e.getFilters().map(qr).join(" ,")+"}"}(e):"Filter"}var zr=function(e){function t(e,n,r){var i;return k(this,t),(i=w(this,t,[e,n,r])).key=bn.fromName(r.referenceValue),i}return b(t,e),g(t,[{key:"matches",value:function(e){var t=bn.comparator(e.key,this.key);return this.matchesComparison(t)}}])}(Pr),Kr=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t,[e,"in",n])).keys=Hr("in",n),r}return b(t,e),g(t,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}])}(Pr),Gr=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t,[e,"not-in",n])).keys=Hr("not-in",n),r}return b(t,e),g(t,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}])}(Pr);function Hr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return bn.fromName(e.referenceValue)}))}var Qr=function(e){function t(e,n){return k(this,t),w(this,t,[e,"array-contains",n])}return b(t,e),g(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Er(t)&&dr(t.arrayValue,this.value)}}])}(Pr),Wr=function(e){function t(e,n){return k(this,t),w(this,t,[e,"in",n])}return b(t,e),g(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&dr(this.value.arrayValue,t)}}])}(Pr),Xr=function(e){function t(e,n){return k(this,t),w(this,t,[e,"not-in",n])}return b(t,e),g(t,[{key:"matches",value:function(e){if(dr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!dr(this.value.arrayValue,t)}}])}(Pr),Yr=function(e){function t(e,n){return k(this,t),w(this,t,[e,"array-contains-any",n])}return b(t,e),g(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Er(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return dr(t.value.arrayValue,e)}))}}])}(Pr),Jr=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;k(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}));function Zr(e){return new Jr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $r(e){var t=Gt(e);if(null===t.Ie){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return jr(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),On(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return gr(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return gr(e)})).join(",")),t.Ie=n}return t.Ie}function ei(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Lr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Br(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xr(e.startAt,t.startAt)&&xr(e.endAt,t.endAt)}function ti(e){return bn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var ni=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}));function ri(e){return new ni(e)}function ii(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ai(e){return null!==e.collectionGroup}function oi(e){var t=Gt(e);if(null===t.Ee){t.Ee=[];var n,r=new Set,i=l(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.Ee.push(a),r.add(a.field.canonicalString())}}catch(u){i.e(u)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",s=function(e){var t=new Bn(wn.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);s.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.Ee.push(new Rr(e,o))})),r.has(wn.keyField().canonicalString())||t.Ee.push(new Rr(wn.keyField(),o))}return t.Ee}function si(e){var t=Gt(e);return t.de||(t.de=function(e,t){if("F"===e.limitType)return Zr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Rr(e.field,t)}));var n=e.endAt?new Nr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nr(e.startAt.position,e.startAt.inclusive):null;return Zr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}(t,oi(e))),t.de}function ui(e,t){var n=e.filters.concat([t]);return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ci(e,t,n){return new ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function li(e,t){return ei(si(e),si(t))&&e.limitType===t.limitType}function hi(e){return"".concat($r(si(e)),"|lt:").concat(e.limitType)}function fi(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return qr(e)})).join(", "),"]")),On(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return gr(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return gr(e)})).join(",")),"Target(".concat(t,")")}(si(e)),"; limitType=").concat(e.limitType,")")}function di(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):bn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=l(oi(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Or(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,oi(e),t))&&!(e.endAt&&!function(e,t,n){var r=Or(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,oi(e),t))}(e,t)}function vi(e){return function(t,n){var r,i=!1,a=l(oi(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=pi(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function pi(e,t,n){var r=e.field.isKeyField()?bn.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vr(r,i):qt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qt(19790,{direction:e.dir})}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var yi=function(){return g((function e(t,n){k(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}),[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Pn(this.inner,(function(t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Vn(this.inner)}},{key:"size",value:function(){return this.innerSize}}])}(),gi=new Fn(bn.comparator);
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function mi(){return gi}var ki=new Fn(bn.comparator);function wi(){for(var e=ki,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function bi(e){var t=ki;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ei(){return _i()}function Ti(){return _i()}function _i(){return new yi((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ii=new Fn(bn.comparator),Ci=new Bn(bn.comparator);function Si(){for(var e=Ci,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Ai=new Bn(sn);
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Di(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xn(t)?"-0":t}}function Ni(e){return{integerValue:""+e}}function Oi(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!xn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(t)?Ni(t):Di(e,t)}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var xi=g((function e(){k(this,e),this._=void 0}));function Ri(e,t,n){return e instanceof Pi?function(e,t){var n={fields:a(a({},Jn,{stringValue:Yn}),$n,{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}})};return t&&er(t)&&(t=tr(t)),t&&(n.fields[Zn]=t),{mapValue:n}}(n,t):e instanceof Vi?Fi(e,t):e instanceof Ui?ji(e,t):function(e,t){var n=Mi(e,t),r=qi(n)+qi(e.Re);return br(n)&&br(e.Re)?Ni(r):Di(e.serializer,r)}(e,t)}function Li(e,t,n){return e instanceof Vi?Fi(e,t):e instanceof Ui?ji(e,t):n}function Mi(e,t){return e instanceof Bi?function(e){return br(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Pi=function(e){function t(){return k(this,t),w(this,t,arguments)}return b(t,e),g(t)}(xi),Vi=function(e){function t(e){var n;return k(this,t),(n=w(this,t)).elements=e,n}return b(t,e),g(t)}(xi);function Fi(e,t){var n,r=zi(t),i=l(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return fr(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ui=function(e){function t(e){var n;return k(this,t),(n=w(this,t)).elements=e,n}return b(t,e),g(t)}(xi);function ji(e,t){var n,r=zi(t),i=l(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!fr(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bi=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t)).serializer=e,r.Re=n,r}return b(t,e),g(t)}(xi);function qi(e){return Wn(e.integerValue||e.doubleValue)}function zi(e){return Er(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Ki=g((function e(t,n){k(this,e),this.field=t,this.transform=n}));var Gi=g((function e(t,n){k(this,e),this.version=t,this.transformResults=n})),Hi=function(){function e(t,n){k(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}])}();function Qi(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Wi=g((function e(){k(this,e)}));function Xi(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sa(e.key,Hi.none()):new ea(e.key,e.data,Hi.none());var n,r=e.data,i=Sr.empty(),a=new Bn(wn.comparator),o=l(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new ta(e.key,i,new zn(a.toArray()),Hi.none())}function Yi(e,t,n){e instanceof ea?function(e,t,n){var r=e.value.clone(),i=ra(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ta?function(e,t,n){if(Qi(e.precondition,t)){var r=ra(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(na(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ji(e,t,n,r){return e instanceof ea?function(e,t,n,r){if(!Qi(e.precondition,t))return n;var i=e.value.clone(),a=ia(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ta?function(e,t,n,r){if(!Qi(e.precondition,t))return n;var i=ia(e.fieldTransforms,r,t),a=t.data;return a.setAll(na(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Qi(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Zi(e,t){var n,r=null,i=l(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Mi(a.transform,o||null);null!=s&&(null===r&&(r=Sr.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function $i(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hn(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Vi&&t instanceof Vi||e instanceof Ui&&t instanceof Ui?hn(e.elements,t.elements,fr):e instanceof Bi&&t instanceof Bi?fr(e.Re,t.Re):e instanceof Pi&&t instanceof Pi}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ea=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return k(this,t),(i=w(this,t)).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return b(t,e),g(t,[{key:"getFieldMask",value:function(){return null}}])}(Wi),ta=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return k(this,t),(a=w(this,t)).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return b(t,e),g(t,[{key:"getFieldMask",value:function(){return this.fieldMask}}])}(Wi);function na(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ra(e,t,n){var r=new Map;Kt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Li(o,s,n[i]))}return r}function ia(e,t,n){var r,i=new Map,a=l(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Ri(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var aa,oa,sa=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t)).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return b(t,e),g(t,[{key:"getFieldMask",value:function(){return null}}])}(Wi),ua=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t)).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return b(t,e),g(t,[{key:"getFieldMask",value:function(){return null}}])}(Wi),ca=function(){return g((function e(t,n,r,i){k(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}),[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Yi(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=l(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ji(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=l(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Ji(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ti();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Xi(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(pn.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Si())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&hn(this.mutations,e.mutations,(function(e,t){return $i(e,t)}))&&hn(this.baseMutations,e.baseMutations,(function(e,t){return $i(e,t)}))}}])}(),la=function(){function e(t,n,r,i){k(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){Kt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});for(var i=Ii,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}])}(),ha=function(){return g((function e(t,n){k(this,e),this.largestBatchId=t,this.mutation=n}),[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}])}(),fa=g((function e(t,n){k(this,e),this.count=t,this.unchangedNames=n}));function da(e){switch(e){case Ht.OK:return qt(64938);case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0;default:return qt(15467,{code:e})}}function va(e){if(void 0===e)return Ut("GRPC error has no .code"),Ht.UNKNOWN;switch(e){case aa.OK:return Ht.OK;case aa.CANCELLED:return Ht.CANCELLED;case aa.UNKNOWN:return Ht.UNKNOWN;case aa.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case aa.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case aa.INTERNAL:return Ht.INTERNAL;case aa.UNAVAILABLE:return Ht.UNAVAILABLE;case aa.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case aa.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case aa.NOT_FOUND:return Ht.NOT_FOUND;case aa.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case aa.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case aa.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case aa.ABORTED:return Ht.ABORTED;case aa.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case aa.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case aa.DATA_LOSS:return Ht.DATA_LOSS;default:return qt(39323,{code:e})}}(oa=aa||(aa={}))[oa.OK=0]="OK",oa[oa.CANCELLED=1]="CANCELLED",oa[oa.UNKNOWN=2]="UNKNOWN",oa[oa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oa[oa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oa[oa.NOT_FOUND=5]="NOT_FOUND",oa[oa.ALREADY_EXISTS=6]="ALREADY_EXISTS",oa[oa.PERMISSION_DENIED=7]="PERMISSION_DENIED",oa[oa.UNAUTHENTICATED=16]="UNAUTHENTICATED",oa[oa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oa[oa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oa[oa.ABORTED=10]="ABORTED",oa[oa.OUT_OF_RANGE=11]="OUT_OF_RANGE",oa[oa.UNIMPLEMENTED=12]="UNIMPLEMENTED",oa[oa.INTERNAL=13]="INTERNAL",oa[oa.UNAVAILABLE=14]="UNAVAILABLE",oa[oa.DATA_LOSS=15]="DATA_LOSS";
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var pa=new wt([4294967295,4294967295],0);function ya(e){var t=an().encode(e),n=new bt;return n.update(t),new Uint8Array(n.digest())}function ga(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new wt([n,r],0),new wt([i,a],0)]}var ma=function(){function e(t,n,r){if(k(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ka("Invalid padding: ".concat(n));if(r<0)throw new ka("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new ka("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new ka("Invalid padding when bitmap length is 0: ".concat(n));this.pe=8*t.length-n,this.ye=wt.fromNumber(this.pe)}return g(e,[{key:"we",value:function(e,t,n){var r=e.add(t.multiply(wt.fromNumber(n)));return 1===r.compare(pa)&&(r=new wt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}},{key:"be",value:function(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.pe)return!1;for(var t=c(ga(ya(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.we(n,r,i);if(!this.be(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.pe)for(var t=c(ga(ya(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.we(n,r,i);this.Se(a)}}},{key:"Se",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}])}(),ka=function(e){function t(){var e;return k(this,t),(e=w(this,t,arguments)).name="BloomFilterError",e}return b(t,e),g(t)}(E(Error)),wa=function(){function e(t,n,r,i,a){k(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,ba.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(pn.min(),i,new Fn(sn),mi(),Si())}}])}(),ba=function(){function e(t,n,r,i,a){k(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Si(),Si(),Si())}}])}(),Ea=g((function e(t,n,r,i){k(this,e),this.De=t,this.removedTargetIds=n,this.key=r,this.ve=i})),Ta=g((function e(t,n){k(this,e),this.targetId=t,this.Ce=n})),_a=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gn.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ia=function(){return g((function e(){k(this,e),this.Fe=0,this.Me=Aa(),this.xe=Gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}),[{key:"current",get:function(){return this.Oe}},{key:"resumeToken",get:function(){return this.xe}},{key:"Be",get:function(){return 0!==this.Fe}},{key:"Le",get:function(){return this.Ne}},{key:"ke",value:function(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}},{key:"qe",value:function(){var e=Si(),t=Si(),n=Si();return this.Me.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qt(38017,{changeType:i})}})),new ba(this.xe,this.Oe,e,t,n)}},{key:"Qe",value:function(){this.Ne=!1,this.Me=Aa()}},{key:"$e",value:function(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}},{key:"Ue",value:function(e){this.Ne=!0,this.Me=this.Me.remove(e)}},{key:"Ke",value:function(){this.Fe+=1}},{key:"We",value:function(){this.Fe-=1,Kt(this.Fe>=0,3241,{Fe:this.Fe})}},{key:"Ge",value:function(){this.Ne=!0,this.Oe=!0}}])}(),Ca=function(){return g((function e(t){k(this,e),this.ze=t,this.je=new Map,this.He=mi(),this.Je=Sa(),this.Ye=Sa(),this.Ze=new Fn(sn)}),[{key:"Xe",value:function(e){var t,n=l(e.De);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ve&&e.ve.isFoundDocument()?this.et(r,e.ve):this.tt(r,e.key,e.ve)}}catch(s){n.e(s)}finally{n.f()}var i,a=l(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.tt(o,e.key,e.ve)}}catch(s){a.e(s)}finally{a.f()}}},{key:"nt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.rt(n);switch(e.state){case 0:t.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||t.removeTarget(n);break;case 3:t.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:t.it(n)&&(t.st(n),r.ke(e.resumeToken));break;default:qt(56790,{state:e.state})}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((function(e,r){n.it(r)&&t(r)}))}},{key:"ot",value:function(e){var t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){var i=r.target;if(ti(i))if(0===n){var a=new bn(i.path);this.tt(t,a,Dr.newNoDocument(a,pn.min()))}else Kt(1===n,20013,{expectedCount:n});else{var o=this.ut(t);if(o!==n){var s=this.ct(e),u=s?this.lt(s,e,o):1;if(0!==u){this.st(t);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,c)}}}}}},{key:"ct",value:function(e){var t=e.Ce.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,s=i.padding,u=void 0===s?0:s,c=t.hashCount,l=void 0===c?0:c;try{n=Xn(o).toUint8Array()}catch(e){if(e instanceof Kn)return jt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new ma(n,u,l)}catch(e){return jt(e instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.pe?null:r}},{key:"lt",value:function(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}},{key:"Tt",value:function(e,t){var n=this,r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.ze.Pt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.tt(t,r,null),i++)})),i}},{key:"It",value:function(e){var t=this,n=new Map;this.je.forEach((function(r,i){var a=t._t(i);if(a){if(r.current&&ti(a.target)){var o=new bn(a.target.path);t.Et(o).has(i)||t.dt(i,o)||t.tt(i,o,Dr.newNoDocument(o,e))}r.Le&&(n.set(i,r.qe()),r.Qe())}}));var r=Si();this.Ye.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t._t(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.He.forEach((function(t,n){return n.setReadTime(e)}));var i=new wa(e,n,this.Ze,this.He,r);return this.He=mi(),this.Je=Sa(),this.Ye=Sa(),this.Ze=new Fn(sn),i}},{key:"et",value:function(e,t){if(this.it(e)){var n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}}},{key:"tt",value:function(e,t,n){if(this.it(e)){var r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}}},{key:"removeTarget",value:function(e){this.je.delete(e)}},{key:"ut",value:function(e){var t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ke",value:function(e){this.rt(e).Ke()}},{key:"rt",value:function(e){var t=this.je.get(e);return t||(t=new Ia,this.je.set(e,t)),t}},{key:"At",value:function(e){var t=this.Ye.get(e);return t||(t=new Bn(sn),this.Ye=this.Ye.insert(e,t)),t}},{key:"Et",value:function(e){var t=this.Je.get(e);return t||(t=new Bn(sn),this.Je=this.Je.insert(e,t)),t}},{key:"it",value:function(e){var t=null!==this._t(e);return t||Ft("WatchChangeAggregator","Detected inactive target",e),t}},{key:"_t",value:function(e){var t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}},{key:"st",value:function(e){var t=this;this.je.set(e,new Ia),this.ze.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))}},{key:"dt",value:function(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}])}();function Sa(){return new Fn(bn.comparator)}function Aa(){return new Fn(bn.comparator)}var Da={asc:"ASCENDING",desc:"DESCENDING"},Na={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oa={and:"AND",or:"OR"},xa=g((function e(t,n){k(this,e),this.databaseId=t,this.useProto3Json=n}));function Ra(e,t){return e.useProto3Json||On(t)?t:{value:t}}function La(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ma(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Pa(e,t){return La(e,t.toTimestamp())}function Va(e){return Kt(!!e,49232),pn.fromTimestamp(function(e){var t=Qn(e);return new vn(t.seconds,t.nanos)}(e))}function Fa(e,t){return Ua(e,t).canonicalString()}function Ua(e,t){var n=function(e){return new mn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ja(e){var t=mn.fromString(e);return Kt(io(t),10190,{key:t.toString()}),t}function Ba(e,t){return Fa(e.databaseId,t.path)}function qa(e,t){var n=ja(t);if(n.get(1)!==e.databaseId.projectId)throw new Qt(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qt(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bn(Ga(n))}function za(e,t){return Fa(e.databaseId,t)}function Ka(e){return new mn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ga(e){return Kt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ha(e,t,n){return{name:Ba(e,t),fields:n.value.mapValue.fields}}function Qa(e,t){return{documents:[za(e,t.path)]}}function Wa(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n=i,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=za(e,n);var a=function(e){if(0!==e.length)return no(Vr.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:eo(e.field),direction:Ja(e.dir)}}(e)}))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);var s=Ra(e,t.limit);return null!==s&&(r.structuredQuery.limit=s),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:r,parent:n}}function Xa(e){var t=function(e){var t=ja(e);return 4===t.length?mn.emptyPath():Ga(t)}(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kt(1===r,65062);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ya(e);return t instanceof Vr&&Ur(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new Rr(to(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return On(t="object"==d(e)?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Nr(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Nr(n,t)}(n.endAt)),function(e,t,n,r,i,a,o,s){return new ni(e,t,n,r,i,a,o,s)}(t,i,s,o,u,"F",c,l)}function Ya(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=to(e.unaryFilter.field);return Pr.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=to(e.unaryFilter.field);return Pr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=to(e.unaryFilter.field);return Pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=to(e.unaryFilter.field);return Pr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}}(e):void 0!==e.fieldFilter?function(e){return Pr.create(to(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Vr.create(e.compositeFilter.filters.map((function(e){return Ya(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qt(1026)}}(e.compositeFilter.op))}(e):qt(30097,{filter:e})}function Ja(e){return Da[e]}function Za(e){return Na[e]}function $a(e){return Oa[e]}function eo(e){return{fieldPath:e.canonicalString()}}function to(e){return wn.fromServerFormat(e.fieldPath)}function no(e){return e instanceof Pr?function(e){if("=="===e.op){if(_r(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NAN"}};if(Tr(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_r(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NOT_NAN"}};if(Tr(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(e.field),op:Za(e.op),value:e.value}}}(e):e instanceof Vr?function(e){var t=e.getFilters().map((function(e){return no(e)}));return 1===t.length?t[0]:{compositeFilter:{op:$a(e.op),filters:t}}}(e):qt(54877,{filter:e})}function ro(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function io(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var ao=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pn.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pn.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gn.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}])}(),oo=g((function e(t){k(this,e),this.wt=t}));
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function so(e){var t=Xa({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ci(t,t.limit,"L"):t}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var uo=function(){return g((function e(){k(this,e),this.Cn=new co}),[{key:"addToCollectionParentIndex",value:function(e,t){return this.Cn.add(t),An.resolve()}},{key:"getCollectionParents",value:function(e,t){return An.resolve(this.Cn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return An.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return An.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return An.resolve()}},{key:"createTargetIndexes",value:function(e,t){return An.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return An.resolve(null)}},{key:"getIndexType",value:function(e,t){return An.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return An.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return An.resolve(null)}},{key:"getMinOffset",value:function(e,t){return An.resolve(Tn.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return An.resolve(Tn.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return An.resolve()}},{key:"updateIndexEntries",value:function(e,t){return An.resolve()}}])}(),co=function(){return g((function e(){k(this,e),this.index={}}),[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bn(mn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Bn(mn.comparator)).toArray()}}])}(),lo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ho=41943040,fo=function(){function e(t,n,r){k(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */fo.DEFAULT_COLLECTION_PERCENTILE=10,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fo.DEFAULT=new fo(ho,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fo.DISABLED=new fo(-1,0,0);
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var vo=function(){function e(t){k(this,e),this.ur=t}return g(e,[{key:"next",value:function(){return this.ur+=2,this.ur}}],[{key:"cr",value:function(){return new e(0)}},{key:"lr",value:function(){return new e(-1)}}])}(),po="LruGarbageCollector";
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function yo(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],s=a[1],u=sn(r,o);return 0===u?sn(i,s):u}var go=function(){return g((function e(t){k(this,e),this.Er=t,this.buffer=new Bn(yo),this.dr=0}),[{key:"Ar",value:function(){return++this.dr}},{key:"Rr",value:function(e){var t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();yo(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}])}(),mo=function(){return g((function e(t,n,r){k(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}),[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}},{key:"stop",value:function(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}},{key:"started",get:function(){return null!==this.Vr}},{key:"mr",value:function(e){var t=this;Ft(po,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,p(o().m((function e(){var n;return o().w((function(e){for(;;)switch(e.n){case 0:return t.Vr=null,e.p=1,e.n=2,t.localStore.collectGarbage(t.garbageCollector);case 2:e.n=5;break;case 3:if(e.p=3,!Dn(n=e.v)){e.n=4;break}Ft(po,"Ignoring IndexedDB error during garbage collection: ",n),e.n=5;break;case 4:return e.n=5,Cn(n);case 5:return e.n=6,t.mr(3e5);case 6:return e.a(2)}}),e,null,[[1,3]])}))))}}])}(),ko=function(){return g((function e(t,n){k(this,e),this.gr=t,this.params=n}),[{key:"calculateTargetCount",value:function(e,t){return this.gr.pr(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return An.resolve(Nn.le);var r=new go(t);return this.gr.forEachTarget(e,(function(e){return r.Rr(e.sequenceNumber)})).next((function(){return n.gr.yr(e,(function(e){return r.Rr(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.gr.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.gr.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector","Garbage collection skipped; disabled"),An.resolve(lo)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),lo):n.wr(e,t)}))}},{key:"getCacheSize",value:function(e){return this.gr.getCacheSize(e)}},{key:"wr",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ft("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Vt()<=ge.DEBUG&&Ft("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),An.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var wo=function(){return g((function e(){k(this,e),this.changes=new yi((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}),[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?An.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}])}(),bo=g((function e(t,n){k(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Eo=function(){return g((function e(t,n,r,i){k(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}),[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ji(r.mutation,e,zn.empty(),vn.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Si()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Si(),i=Ei();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=wi();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ei();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Si())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=mi(),a=_i(),o=_i();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ta)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ji(o.mutation,t,o.mutation.getFieldMask(),vn.now())):a.set(t.key,zn.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new bo(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=_i(),i=new Fn((function(e,t){return e-t})),a=Si();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=l(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||zn.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Si()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Ti();c.forEach((function(e){if(!a.has(e)){var n=Xi(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return An.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return bn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ai(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):An.resolve(Ei()),s=-1,u=a;return o.next((function(t){return An.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?An.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Si())})).next((function(e){return{batchId:s,changes:bi(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new bn(t)).next((function(e){var t=wi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=wi();return this.indexManager.getCollectionParents(e,a).next((function(s){return An.forEach(s,(function(s){var u=function(e,t){return new ni(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(a));return i.getDocumentsMatchingCollectionQuery(e,u,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Dr.newInvalidDocument(r)))}));var n=wi();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&Ji(a.mutation,r,zn.empty(),vn.now()),di(t,r)&&(n=n.insert(e,r))})),n}))}}])}(),To=function(){return g((function e(t){k(this,e),this.serializer=t,this.kr=new Map,this.qr=new Map}),[{key:"getBundleMetadata",value:function(e,t){return An.resolve(this.kr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Va(e.createTime)}}(t)),An.resolve()}},{key:"getNamedQuery",value:function(e,t){return An.resolve(this.qr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:so(e.bundledQuery),readTime:Va(e.readTime)}}(t)),An.resolve()}}])}(),_o=function(){return g((function e(){k(this,e),this.overlays=new Fn(bn.comparator),this.Qr=new Map}),[{key:"getOverlay",value:function(e,t){return An.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ei();return An.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.St(e,t,i)})),An.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Qr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Qr.delete(n)),An.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ei(),i=t.length+1,a=new bn(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return An.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Fn((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Ei(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Ei(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return An.resolve(u)}},{key:"St",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ha(t,n));var a=this.Qr.get(t);void 0===a&&(a=Si(),this.Qr.set(t,a)),this.Qr.set(t,a.add(n.key))}}])}(),Io=function(){return g((function e(){k(this,e),this.sessionToken=Gn.EMPTY_BYTE_STRING}),[{key:"getSessionToken",value:function(e){return An.resolve(this.sessionToken)}},{key:"setSessionToken",value:function(e,t){return this.sessionToken=t,An.resolve()}}])}(),Co=function(){return g((function e(){k(this,e),this.$r=new Bn(So.Ur),this.Kr=new Bn(So.Wr)}),[{key:"isEmpty",value:function(){return this.$r.isEmpty()}},{key:"addReference",value:function(e,t){var n=new So(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}},{key:"Gr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.zr(new So(e,t))}},{key:"jr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Hr",value:function(e){var t=this,n=new bn(new mn([])),r=new So(n,e),i=new So(n,e+1),a=[];return this.Kr.forEachInRange([r,i],(function(e){t.zr(e),a.push(e.key)})),a}},{key:"Jr",value:function(){var e=this;this.$r.forEach((function(t){return e.zr(t)}))}},{key:"zr",value:function(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}},{key:"Yr",value:function(e){var t=new bn(new mn([])),n=new So(t,e),r=new So(t,e+1),i=Si();return this.Kr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new So(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}])}(),So=function(){return g((function e(t,n){k(this,e),this.key=t,this.Zr=n}),null,[{key:"Ur",value:function(e,t){return bn.comparator(e.key,t.key)||sn(e.Zr,t.Zr)}},{key:"Wr",value:function(e,t){return sn(e.Zr,t.Zr)||bn.comparator(e.key,t.key)}}])}(),Ao=function(){return g((function e(t,n){k(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Bn(So.Ur)}),[{key:"checkEmpty",value:function(e){return An.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ca(i,t,n,r);this.mutationQueue.push(a);var o,s=l(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Xr=this.Xr.add(new So(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return An.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return An.resolve(this.ei(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ti(n),i=r<0?0:r;return An.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return An.resolve(0===this.mutationQueue.length?-1:this.nr-1)}},{key:"getAllMutationBatches",value:function(e){return An.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new So(t,0),i=new So(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],(function(e){var t=n.ei(e.Zr);a.push(t)})),An.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Bn(sn);return t.forEach((function(e){var t=new So(e,0),i=new So(e,Number.POSITIVE_INFINITY);n.Xr.forEachInRange([t,i],(function(e){r=r.add(e.Zr)}))})),An.resolve(this.ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;bn.isDocumentKey(i)||(i=i.child(""));var a=new So(new bn(i),0),o=new Bn(sn);return this.Xr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Zr)),!0)}),a),An.resolve(this.ni(o))}},{key:"ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ei(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Kt(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();var r=this.Xr;return An.forEach(t.mutations,(function(i){var a=new So(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Xr=r}))}},{key:"sr",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new So(t,0),r=this.Xr.firstAfterOrEqual(n);return An.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,An.resolve()}},{key:"ri",value:function(e,t){return this.ti(e)}},{key:"ti",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ei",value:function(e){var t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}])}(),Do=function(){return g((function e(t){k(this,e),this.ii=t,this.docs=new Fn(bn.comparator),this.size=0}),[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return An.resolve(n?n.document.mutableCopy():Dr.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=mi();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Dr.newInvalidDocument(e))})),An.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=mi(),a=t.path,o=new bn(a.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||_n(En(l),n)<=0||(r.has(l.key)||di(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return An.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){qt(9500)}},{key:"si",value:function(e,t){return An.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new No(this)}},{key:"getSize",value:function(e){return An.resolve(this.size)}}])}(),No=function(e){function t(e){var n;return k(this,t),(n=w(this,t)).Br=e,n}return b(t,e),g(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Br.addEntry(e,i)):t.Br.removeEntry(r)})),An.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Br.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Br.getEntries(e,t)}}])}(wo),Oo=function(){return g((function e(t){k(this,e),this.persistence=t,this.oi=new yi((function(e){return $r(e)}),ei),this.lastRemoteSnapshotVersion=pn.min(),this.highestTargetId=0,this._i=0,this.ai=new Co,this.targetCount=0,this.ui=vo.cr()}),[{key:"forEachTarget",value:function(e,t){return this.oi.forEach((function(e,n){return t(n)})),An.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return An.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return An.resolve(this._i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.ui.next(),An.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),An.resolve()}},{key:"Tr",value:function(e){this.oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ui=new vo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tr(t),this.targetCount+=1,An.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tr(t),An.resolve()}},{key:"removeTargetData",value:function(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,An.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),An.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return An.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.oi.get(t)||null;return An.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ai.Gr(t,n),An.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ai.jr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),An.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ai.Hr(t),An.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ai.Yr(t);return An.resolve(n)}},{key:"containsKey",value:function(e,t){return An.resolve(this.ai.containsKey(t))}}])}(),xo=function(){return g((function e(t,n){var r=this;k(this,e),this.ci={},this.overlays={},this.li=new Nn(0),this.hi=!1,this.hi=!0,this.Pi=new Io,this.referenceDelegate=t(this),this.Ti=new Oo(this),this.indexManager=new uo,this.remoteDocumentCache=function(e){return new Do(e)}((function(e){return r.referenceDelegate.Ii(e)})),this.serializer=new oo(n),this.Ei=new To(this.serializer)}),[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.hi=!1,Promise.resolve()}},{key:"started",get:function(){return this.hi}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new _o,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.ci[e.toKey()];return n||(n=new Ao(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}},{key:"getGlobalsCache",value:function(){return this.Pi}},{key:"getTargetCache",value:function(){return this.Ti}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ei}},{key:"runTransaction",value:function(e,t,n){var r=this;Ft("MemoryPersistence","Starting transaction:",e);var i=new Ro(this.li.next());return this.referenceDelegate.di(),n(i).next((function(e){return r.referenceDelegate.Ai(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ri",value:function(e,t){return An.or(Object.values(this.ci).map((function(n){return function(){return n.containsKey(e,t)}})))}}])}(),Ro=function(e){function t(e){var n;return k(this,t),(n=w(this,t)).currentSequenceNumber=e,n}return b(t,e),g(t)}(In),Lo=function(){function e(t){k(this,e),this.persistence=t,this.Vi=new Co,this.mi=null}return g(e,[{key:"gi",get:function(){if(this.mi)return this.mi;throw qt(60996)}},{key:"addReference",value:function(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),An.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),An.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.gi.add(t.toString()),An.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Vi.Hr(t.targetId).forEach((function(e){return n.gi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.gi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"di",value:function(){this.mi=new Set}},{key:"Ai",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return An.forEach(this.gi,(function(r){var i=bn.fromPath(r);return t.pi(e,i).next((function(e){e||n.removeEntry(i,pn.min())}))})).next((function(){return t.mi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.pi(e,t).next((function(e){e?n.gi.delete(t.toString()):n.gi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"pi",value:function(e,t){var n=this;return An.or([function(){return An.resolve(n.Vi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ri(e,t)}])}}],[{key:"fi",value:function(t){return new e(t)}}])}(),Mo=function(){function e(t,n){k(this,e),this.persistence=t,this.yi=new yi((function(e){return function(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ln(t)),t=Rn(e.get(n),t);return Ln(t)}(e.path)}),(function(e,t){return e.isEqual(t)})),this.garbageCollector=function(e,t){return new ko(e,t)}(this,n)}return g(e,[{key:"di",value:function(){}},{key:"Ai",value:function(e){return An.resolve()}},{key:"forEachTarget",value:function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}},{key:"pr",value:function(e){var t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"br",value:function(e){var t=0;return this.yr(e,(function(e){t++})).next((function(){return t}))}},{key:"yr",value:function(e,t){var n=this;return An.forEach(this.yi,(function(r,i){return n.Dr(e,r,i).next((function(e){return e?An.resolve():t(i)}))}))}},{key:"removeTargets",value:function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,(function(i){return n.Dr(e,i,t).next((function(e){e||(r++,a.removeEntry(i,pn.min()))}))})).next((function(){return a.apply(e)})).next((function(){return r}))}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.yi.set(t,e.currentSequenceNumber),An.resolve()}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}},{key:"addReference",value:function(e,t,n){return this.yi.set(n,e.currentSequenceNumber),An.resolve()}},{key:"removeReference",value:function(e,t,n){return this.yi.set(n,e.currentSequenceNumber),An.resolve()}},{key:"updateLimboDocument",value:function(e,t){return this.yi.set(t,e.currentSequenceNumber),An.resolve()}},{key:"Ii",value:function(e){var t=e.key.toString().length;return e.isFoundDocument()&&(t+=kr(e.data.value)),t}},{key:"Dr",value:function(e,t,n){var r=this;return An.or([function(){return r.persistence.Ri(e,t)},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.yi.get(t);return An.resolve(void 0!==e&&e>n)}])}},{key:"getCacheSize",value:function(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}],[{key:"fi",value:function(t,n){return new e(t,n)}}])}(),Po=function(){function e(t,n,r,i){k(this,e),this.targetId=t,this.fromCache=n,this.ds=r,this.As=i}return g(e,null,[{key:"Rs",value:function(t,n){var r,i=Si(),a=Si(),o=l(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}])}(),Vo=function(){return g((function e(){k(this,e),this._documentReadCount=0}),[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}])}(),Fo=function(){return g((function e(){var t,n,r;k(this,e),this.Vs=!1,this.fs=!1,this.gs=100,this.ps=ie()?8:(t="undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"",n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1",Number(r)>0?6:4)}),[{key:"initialize",value:function(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.ws(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.bs(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Vo;return i.Ss(e,t,n).next((function(r){if(a.result=r,i.fs)return i.Ds(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Ds",value:function(e,t,n,r){return n.documentReadCount<this.gs?(Vt()<=ge.DEBUG&&Ft("QueryEngine","SDK will not create cache indexes for query:",fi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),An.resolve()):(Vt()<=ge.DEBUG&&Ft("QueryEngine","Query:",fi(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(Vt()<=ge.DEBUG&&Ft("QueryEngine","The SDK decides to create cache indexes for query:",fi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(t))):An.resolve())}},{key:"ws",value:function(e,t){var n=this;if(ii(t))return An.resolve(null);var r=si(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ci(t,null,"F"),r=si(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Si.apply(void 0,u(i));return n.ys.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.vs(t,i);return n.Cs(t,o,a,r.readTime)?n.ws(e,ci(t,null,"F")):n.Fs(e,o,t,r)}))}))})))}))}},{key:"bs",value:function(e,t,n,r){var i=this;return ii(t)||r.isEqual(pn.min())?An.resolve(null):this.ys.getDocuments(e,n).next((function(a){var o=i.vs(t,a);return i.Cs(t,o,n,r)?An.resolve(null):(Vt()<=ge.DEBUG&&Ft("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fi(t)),i.Fs(e,o,t,function(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=pn.fromTimestamp(1e9===r?new vn(n+1,0):new vn(n,r));return new Tn(i,bn.empty(),t)}(r,-1)).next((function(e){return e})))}))}},{key:"vs",value:function(e,t){var n=new Bn(vi(e));return t.forEach((function(t,r){di(e,r)&&(n=n.add(r))})),n}},{key:"Cs",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ss",value:function(e,t,n){return Vt()<=ge.DEBUG&&Ft("QueryEngine","Using full collection scan to execute query:",fi(t)),this.ys.getDocumentsMatchingQuery(e,t,Tn.min(),n)}},{key:"Fs",value:function(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}])}(),Uo="LocalStore",jo=function(){return g((function e(t,n,r,i){k(this,e),this.persistence=t,this.Ms=n,this.serializer=i,this.xs=new Fn(sn),this.Os=new yi((function(e){return $r(e)}),ei),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}),[{key:"Ls",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eo(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.xs)}))}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Bo(e,t){return qo.apply(this,arguments)}function qo(){return(qo=p(o().m((function e(t,n){var r;return o().w((function(e){for(;;)switch(e.n){case 0:return r=Gt(t),e.n=1,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Si(),u=l(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var h,f=l(c.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;s=s.add(d.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){u.e(w)}finally{u.f()}var v,p=l(n);try{for(p.s();!(v=p.n()).done;){var y=v.value;o.push(y.batchId);var g,m=l(y.mutations);try{for(m.s();!(g=m.n()).done;){var k=g.value;s=s.add(k.key)}}catch(w){m.e(w)}finally{m.f()}}}catch(w){p.e(w)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ks:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 1:return e.a(2,e.v)}}),e)})))).apply(this,arguments)}function zo(e,t){var n=Gt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=An.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Kt(null!==a,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Si(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Ko(e){var t=Gt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ti.getLastRemoteSnapshotVersion(e)}))}function Go(e,t){var n=Gt(e),r=t.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Ti.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Ti.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Gn.EMPTY_BYTE_STRING,pn.min()).withLastLimboFreeSnapshotVersion(pn.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Ti.updateTargetData(e,c))}}));var s=mi(),u=Si();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){var r=Si(),i=Si();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=mi();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(pn.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ft(Uo,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{qs:r,Qs:i}}))}(e,a,t.documentUpdates).next((function(e){s=e.qs,u=e.Qs}))),!r.isEqual(pn.min())){var c=n.Ti.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return An.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.xs=i,e}))}function Ho(e,t){var n=Gt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Qo(e,t){var n=Gt(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ti.getTargetData(e,t).next((function(i){return i?(r=i,An.resolve(r)):n.Ti.allocateTargetId(e).next((function(i){return r=new ao(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}function Wo(e,t,n){return Xo.apply(this,arguments)}function Xo(){return(Xo=p(o().m((function e(t,n,r){var i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:if(i=Gt(t),a=i.xs.get(n),s=r?"readwrite":"readwrite-primary",e.p=1,r){e.n=2;break}return e.n=2,i.persistence.runTransaction("Release target",s,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 2:e.n=5;break;case 3:if(e.p=3,Dn(u=e.v)){e.n=4;break}throw u;case 4:Ft(Uo,"Failed to update sequence numbers for target ".concat(n,": ").concat(u));case 5:i.xs=i.xs.remove(n),i.Os.delete(a.target);case 6:return e.a(2)}}),e,null,[[1,3]])})))).apply(this,arguments)}function Yo(e,t,n){var r=Gt(e),i=pn.min(),a=Si();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Gt(e),i=r.Os.get(n);return void 0!==i?An.resolve(r.xs.get(i)):r.Ti.getTargetData(t,n)}(r,e,si(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ms.getDocumentsMatchingQuery(e,t,n?i:pn.min(),n?a:Si())})).next((function(e){return function(e,t,n){var r=e.Ns.get(t)||pn.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,$s:a}}))}))}var Jo=function(){return g((function e(){k(this,e),this.activeTargetIds=Ai}),[{key:"js",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Hs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"zs",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}])}(),Zo=function(){return g((function e(){k(this,e),this.xo=new Jo,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}),[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Oo[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.xo.Hs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.xo.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Oo[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.xo.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.xo.activeTargetIds.has(e)}},{key:"start",value:function(){return this.xo=new Jo,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}])}(),$o=function(){return g((function e(){k(this,e)}),[{key:"No",value:function(e){}},{key:"shutdown",value:function(){}}])}(),es="ConnectivityMonitor",ts=function(){return g((function e(){var t=this;k(this,e),this.Bo=function(){return t.Lo()},this.ko=function(){return t.qo()},this.Qo=[],this.$o()}),[{key:"No",value:function(e){this.Qo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}},{key:"$o",value:function(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}},{key:"Lo",value:function(){Ft(es,"Network connectivity changed: AVAILABLE");var e,t=l(this.Qo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"qo",value:function(){Ft(es,"Network connectivity changed: UNAVAILABLE");var e,t=l(this.Qo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}])}(),ns=null;function rs(){return null===ns?ns=268435456+Math.round(2147483648*Math.random()):ns++,"0x"+ns.toString(16)
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var is="RestConnection",as={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},os=function(){return g((function e(t){k(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo="projects/".concat(r,"/databases/").concat(i),this.Go=this.databaseId.database===ir?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}),[{key:"Uo",get:function(){return!1}},{key:"zo",value:function(e,t,n,r,i){var a=rs(),o=this.jo(e,t.toUriEncodedString());Ft(is,"Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(s,r,i);var u=$(new URL(o).host);return this.Jo(e,o,s,n,u).then((function(t){return Ft(is,"Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw jt(is,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Yo",value:function(e,t,n,r,i,a){return this.zo(e,t,n,r,i)}},{key:"Ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"jo",value:function(e,t){var n=as[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}},{key:"terminate",value:function(){}}])}(),ss=function(){return g((function e(t){k(this,e),this.Zo=t.Zo,this.Xo=t.Xo}),[{key:"e_",value:function(e){this.t_=e}},{key:"n_",value:function(e){this.r_=e}},{key:"i_",value:function(e){this.s_=e}},{key:"onMessage",value:function(e){this.o_=e}},{key:"close",value:function(){this.Xo()}},{key:"send",value:function(e){this.Zo(e)}},{key:"__",value:function(){this.t_()}},{key:"a_",value:function(){this.r_()}},{key:"u_",value:function(e){this.s_(e)}},{key:"c_",value:function(e){this.o_(e)}}])}(),us="WebChannelConnection",cs=function(e){function t(e){var n;return k(this,t),(n=w(this,t,[e])).l_=[],n.forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n.longPollingOptions=e.longPollingOptions,n}return b(t,e),g(t,[{key:"Jo",value:function(e,t,n,r,i){var a=rs();return new Promise((function(i,o){var s=new Tt;s.setWithCredentials(!0),s.listenOnce(It.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Ct.NO_ERROR:var t=s.getResponseJson();Ft(us,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(t)),i(t);break;case Ct.TIMEOUT:Ft(us,"RPC '".concat(e,"' ").concat(a," timed out")),o(new Qt(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case Ct.HTTP_ERROR:var n=s.getStatus();if(Ft(us,"RPC '".concat(e,"' ").concat(a," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(t)>=0?t:Ht.UNKNOWN}(u.status);o(new Qt(c,u.message))}else o(new Qt(Ht.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Qt(Ht.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{h_:e,streamId:a,P_:s.getLastErrorCode(),T_:s.getLastError()})}}finally{Ft(us,"RPC '".concat(e,"' ").concat(a," completed."))}}));var u=JSON.stringify(r);Ft(us,"RPC '".concat(e,"' ").concat(a," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"I_",value:function(e,t,n){var r=this,i=rs(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nt(),s=Dt(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var l=a.join("");Ft(us,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(l),u);var h=o.createWebChannel(l,u);this.E_(h);var f=!1,d=!1,v=new ss({Zo:function(t){d?Ft(us,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(f||(Ft(us,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),h.open(),f=!0),Ft(us,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),h.send(t))},Xo:function(){return h.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(h,_t.EventType.OPEN,(function(){d||(Ft(us,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),v.__())})),p(h,_t.EventType.CLOSE,(function(){d||(d=!0,Ft(us,"RPC '".concat(e,"' stream ").concat(i," transport closed")),v.u_(),r.d_(h))})),p(h,_t.EventType.ERROR,(function(t){d||(d=!0,jt(us,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),t.name,"Message:",t.message),v.u_(new Qt(Ht.UNAVAILABLE,"The operation could not be completed")))})),p(h,_t.EventType.MESSAGE,(function(t){var n;if(!d){var r=t.data[0];Kt(!!r,16349);var a=r,o=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Ft(us,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);var s=o.status,u=function(e){var t=aa[e];if(void 0!==t)return va(t)}(s),c=o.message;void 0===u&&(u=Ht.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),d=!0,v.u_(new Qt(u,c)),h.close()}else Ft(us,"RPC '".concat(e,"' stream ").concat(i," received:"),r),v.c_(r)}})),p(s,At.STAT_EVENT,(function(t){t.stat===St.PROXY?Ft(us,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===St.NOPROXY&&Ft(us,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((function(){v.a_()}),0),v}},{key:"terminate",value:function(){this.l_.forEach((function(e){return e.close()})),this.l_=[]}},{key:"E_",value:function(e){this.l_.push(e)}},{key:"d_",value:function(e){this.l_=this.l_.filter((function(t){return t===e}))}}])}(os);function ls(){return"undefined"!=typeof document?document:null}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function hs(e){return new xa(e,!0)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var fs=function(){return g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;k(this,e),this.xi=t,this.timerId=n,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}),[{key:"reset",value:function(){this.m_=0}},{key:"p_",value:function(){this.m_=this.V_}},{key:"y_",value:function(e){var t=this;this.cancel();var n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&Ft("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,(function(){return t.g_=Date.now(),e()})),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}},{key:"cancel",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}},{key:"w_",value:function(){return(Math.random()-.5)*this.m_}}])}(),ds="PersistentStream",vs=function(){return g((function e(t,n,r,i,a,o,s,u){k(this,e),this.xi=t,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new fs(t,n)}),[{key:"O_",value:function(){return 1===this.state||5===this.state||this.N_()}},{key:"N_",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){this.M_=0,4!==this.state?this.auth():this.B_()}},{key:"stop",value:(n=p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:if(!this.O_()){e.n=1;break}return e.n=1,this.close(0);case 1:return e.a(2)}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"L_",value:function(){this.state=0,this.x_.reset()}},{key:"k_",value:function(){var e=this;this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,(function(){return e.q_()})))}},{key:"Q_",value:function(e){this.U_(),this.stream.send(e)}},{key:"q_",value:(t=p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:if(!this.N_()){e.n=1;break}return e.a(2,this.close(0));case 1:return e.a(2)}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"U_",value:function(){this.C_&&(this.C_.cancel(),this.C_=null)}},{key:"K_",value:function(){this.F_&&(this.F_.cancel(),this.F_=null)}},{key:"close",value:(e=p(o().m((function e(t,n){return o().w((function(e){for(;;)switch(e.n){case 0:return this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==t?this.x_.reset():n&&n.code===Ht.RESOURCE_EXHAUSTED?(Ut(n.toString()),Ut("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Ht.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,e.n=1,this.listener.i_(n);case 1:return e.a(2)}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"W_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.v_===n&&e.z_(i,a)}),(function(n){t((function(){var t=new Qt(Ht.UNKNOWN,"Fetching auth token failed: "+n.message);return e.j_(t)}))}))}},{key:"z_",value:function(e,t){var n=this,r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_((function(){r((function(){return n.listener.e_()}))})),this.stream.n_((function(){r((function(){return n.state=2,n.F_=n.xi.enqueueAfterDelay(n.D_,1e4,(function(){return n.N_()&&(n.state=3),Promise.resolve()})),n.listener.n_()}))})),this.stream.i_((function(e){r((function(){return n.j_(e)}))})),this.stream.onMessage((function(e){r((function(){return 1==++n.M_?n.J_(e):n.onNext(e)}))}))}},{key:"B_",value:function(){var e=this;this.state=5,this.x_.y_(p(o().m((function t(){return o().w((function(t){for(;;)switch(t.n){case 0:e.state=0,e.start();case 1:return t.a(2)}}),t)}))))}},{key:"j_",value:function(e){return Ft(ds,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"G_",value:function(e){var t=this;return function(n){t.xi.enqueueAndForget((function(){return t.v_===e?n():(Ft(ds,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]);var e,t,n}(),ps=function(e){function t(e,n,r,i,a,o){var s;return k(this,t),(s=w(this,t,[e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o])).serializer=a,s}return b(t,e),g(t,[{key:"H_",value:function(e,t){return this.connection.I_("Listen",e,t)}},{key:"J_",value:function(e){return this.onNext(e)}},{key:"onNext",value:function(e){this.x_.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qt(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Kt(void 0===t||"string"==typeof t,58123),Gn.fromBase64String(t||"")):(Kt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Gn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Ht.UNKNOWN:va(e.code);return new Qt(t,e.message||"")}(o);n=new _a(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=qa(e,u.document.name),l=Va(u.document.updateTime),h=u.document.createTime?Va(u.document.createTime):pn.min(),f=new Sr({mapValue:{fields:u.document.fields}}),d=Dr.newFoundDocument(c,l,h,f),v=u.targetIds||[],p=u.removedTargetIds||[];n=new Ea(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var g=qa(e,y.document),m=y.readTime?Va(y.readTime):pn.min(),k=Dr.newNoDocument(g,m),w=y.removedTargetIds||[];n=new Ea([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var E=qa(e,b.document),T=b.removedTargetIds||[];n=new Ea([],T,E,null)}else{if(!("filter"in t))return qt(11601,{Vt:t});t.filter;var _=t.filter;_.targetId;var I=_.count,C=void 0===I?0:I,S=_.unchangedNames,A=new fa(C,S),D=_.targetId;n=new Ta(D,A)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return pn.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?pn.min():t.readTime?Va(t.readTime):pn.min()}(e);return this.listener.Y_(t,n)}},{key:"Z_",value:function(e){var t={};t.database=Ka(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=ti(r)?{documents:Qa(e,r)}:{query:Wa(e,r).gt}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ma(e,t.resumeToken);var i=Ra(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(pn.min())>0){n.readTime=La(e,t.snapshotVersion.toTimestamp());var a=Ra(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}},{key:"X_",value:function(e){var t={};t.database=Ka(this.serializer),t.removeTarget=e,this.Q_(t)}}])}(vs),ys=function(e){function n(e,t,r,i,a,o){var s;return k(this,n),(s=w(this,n,[e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o])).serializer=a,s}return b(n,e),g(n,[{key:"ea",get:function(){return this.M_>0}},{key:"start",value:function(){this.lastStreamToken=void 0,t(n,"start",this,3)([])}},{key:"W_",value:function(){this.ea&&this.ta([])}},{key:"H_",value:function(e,t){return this.connection.I_("Write",e,t)}},{key:"J_",value:function(e){return Kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}},{key:"onNext",value:function(e){Kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();var t=function(e,t){return e&&e.length>0?(Kt(void 0!==t,14353),e.map((function(e){return function(e,t){var n=e.updateTime?Va(e.updateTime):Va(t);return n.isEqual(pn.min())&&(n=Va(t)),new Gi(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Va(e.commitTime);return this.listener.ra(n,t)}},{key:"ia",value:function(){var e={};e.database=Ka(this.serializer),this.Q_(e)}},{key:"ta",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return function(e,t){var n;if(t instanceof ea)n={update:Ha(e,t.key,t.value)};else if(t instanceof sa)n={delete:Ba(e,t.key)};else if(t instanceof ta)n={update:Ha(e,t.key,t.data),updateMask:ro(t.fieldMask)};else{if(!(t instanceof ua))return qt(16599,{ft:t.type});n={verify:Ba(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Pi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ui)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bi)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw qt(20930,{transform:t.transform})}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Pa(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qt(27497)}(e,t.precondition)),n}(t.serializer,e)}))};this.Q_(n)}}])}(vs),gs=function(e){function t(e,n,r,i){var a;return k(this,t),(a=w(this,t)).authCredentials=e,a.appCheckCredentials=n,a.connection=r,a.serializer=i,a.sa=!1,a}return b(t,e),g(t,[{key:"oa",value:function(){if(this.sa)throw new Qt(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"zo",value:function(e,t,n,r){var i=this;return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),s=o[0],u=o[1];return i.connection.zo(e,Ua(t,n),r,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ht.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Qt(Ht.UNKNOWN,e.toString())}))}},{key:"Yo",value:function(e,t,n,r,i){var a=this;return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var s=c(o,2),u=s[0],l=s[1];return a.connection.Yo(e,Ua(t,n),r,u,l,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ht.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Qt(Ht.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.sa=!0,this.connection.terminate()}}])}(g((function e(){k(this,e)}))),ms=function(){return g((function e(t,n){k(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}),[{key:"ca",value:function(){var e=this;0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.aa=null,e.ha("Backend didn't respond within 10 seconds."),e.la("Offline"),Promise.resolve()})))}},{key:"Pa",value:function(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}},{key:"set",value:function(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}},{key:"la",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ha",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(Ut(t),this.ua=!1):Ft("OnlineStateTracker",t)}},{key:"Ta",value:function(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}])}(),ks="RemoteStore",ws=g((function e(t,n,r,i,a){var s=this;k(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No((function(e){r.enqueueAndForget(p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:if(!Os(s)){e.n=1;break}return Ft(ks,"Restarting streams for network reachability change."),e.n=1,function(){var e=p(o().m((function e(t){var n;return o().w((function(e){for(;;)switch(e.n){case 0:return(n=Gt(t)).da.add(4),e.n=1,Ts(n);case 1:return n.Va.set("Unknown"),n.da.delete(4),e.n=2,bs(n);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 1:return e.a(2)}}),e)}))))})),this.Va=new ms(r,i)}));
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function bs(e){return Es.apply(this,arguments)}function Es(){return(Es=p(o().m((function e(t){var n,r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:if(!Os(t)){e.n=7;break}n=l(t.Aa),e.p=1,n.s();case 2:if((r=n.n()).done){e.n=4;break}return i=r.value,e.n=3,i(!0);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,a=e.v,n.e(a);case 6:return e.p=6,n.f(),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})))).apply(this,arguments)}function Ts(e){return _s.apply(this,arguments)}function _s(){return(_s=p(o().m((function e(t){var n,r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:n=l(t.Aa),e.p=1,n.s();case 2:if((r=n.n()).done){e.n=4;break}return i=r.value,e.n=3,i(!1);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,a=e.v,n.e(a);case 6:return e.p=6,n.f(),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})))).apply(this,arguments)}function Is(e,t){var n=Gt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Ns(n)?Ds(n):uu(n).N_()&&Ss(n,t))}function Cs(e,t){var n=Gt(e),r=uu(n);n.Ea.delete(t),r.N_()&&As(n,t),0===n.Ea.size&&(r.N_()?r.k_():Os(n)&&n.Va.set("Unknown"))}function Ss(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pn.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}uu(e).Z_(t)}function As(e,t){e.ma.Ke(t),uu(e).X_(t)}function Ds(e){e.ma=new Ca({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Rt:function(t){return e.Ea.get(t)||null},Pt:function(){return e.datastore.serializer.databaseId}}),uu(e).start(),e.Va.ca()}function Ns(e){return Os(e)&&!uu(e).O_()&&e.Ea.size>0}function Os(e){return 0===Gt(e).da.size}function xs(e){e.ma=void 0}function Rs(e){return Ls.apply(this,arguments)}function Ls(){return(Ls=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:t.Va.set("Online");case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function Ms(e){return Ps.apply(this,arguments)}function Ps(){return(Ps=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:t.Ea.forEach((function(e,n){Ss(t,e)}));case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function Vs(e,t){return Fs.apply(this,arguments)}function Fs(){return(Fs=p(o().m((function e(t,n){return o().w((function(e){for(;;)switch(e.n){case 0:xs(t),Ns(t)?(t.Va.Pa(n),Ds(t)):t.Va.set("Unknown");case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function Us(e,t,n){return js.apply(this,arguments)}function js(){return js=p(o().m((function e(t,n,r){var i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:if(t.Va.set("Online"),!(n instanceof _a&&2===n.state&&n.cause)){e.n=5;break}return e.p=1,e.n=2,function(){var e=p(o().m((function e(t,n){var r,i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:r=n.cause,i=l(n.targetIds),e.p=1,i.s();case 2:if((a=i.n()).done){e.n=5;break}if(s=a.value,!t.Ea.has(s)){e.n=4;break}return e.n=3,t.remoteSyncer.rejectListen(s,r);case 3:t.Ea.delete(s),t.ma.removeTarget(s);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,u=e.v,i.e(u);case 7:return e.p=7,i.f(),e.f(7);case 8:return e.a(2)}}),e,null,[[1,6,7,8]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 2:e.n=4;break;case 3:return e.p=3,a=e.v,Ft(ks,"Failed to remove targets %s: %s ",n.targetIds.join(","),a),e.n=4,Bs(t,a);case 4:case 8:e.n=10;break;case 5:if(n instanceof Ea?t.ma.Xe(n):n instanceof Ta?t.ma.ot(n):t.ma.nt(n),r.isEqual(pn.min())){e.n=10;break}return e.p=6,e.n=7,Ko(t.localStore);case 7:if(i=e.v,!(r.compareTo(i)>=0)){e.n=8;break}return e.n=8,function(e,t){var n=e.ma.It(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Ea.get(r);i&&e.Ea.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Ea.get(t);if(r){e.Ea.set(t,r.withResumeToken(Gn.EMPTY_BYTE_STRING,r.snapshotVersion)),As(e,t);var i=new ao(r.target,t,n,r.sequenceNumber);Ss(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 9:return e.p=9,s=e.v,Ft(ks,"Failed to raise snapshot:",s),e.n=10,Bs(t,s);case 10:return e.a(2)}}),e,null,[[6,9],[1,3]])}))),js.apply(this,arguments)}function Bs(e,t,n){return qs.apply(this,arguments)}function qs(){return(qs=p(o().m((function e(t,n,r){return o().w((function(e){for(;;)switch(e.n){case 0:if(Dn(n)){e.n=1;break}throw n;case 1:return t.da.add(1),e.n=2,Ts(t);case 2:t.Va.set("Offline"),r||(r=function(){return Ko(t.localStore)}),t.asyncQueue.enqueueRetryable(p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:return Ft(ks,"Retrying IndexedDB access"),e.n=1,r();case 1:return t.da.delete(1),e.n=2,bs(t);case 2:return e.a(2)}}),e)}))));case 3:return e.a(2)}}),e)})))).apply(this,arguments)}function zs(e,t){return t().catch((function(n){return Bs(e,n,t)}))}function Ks(e){return Gs.apply(this,arguments)}function Gs(){return(Gs=p(o().m((function e(t){var n,r,i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:n=Gt(t),r=cu(n),i=n.Ia.length>0?n.Ia[n.Ia.length-1].batchId:-1;case 1:if(!Hs(n)){e.n=7;break}return e.p=2,e.n=3,Ho(n.localStore,i);case 3:if(null!==(a=e.v)){e.n=4;break}return 0===n.Ia.length&&r.k_(),e.a(3,7);case 4:i=a.batchId,Qs(n,a),e.n=6;break;case 5:return e.p=5,s=e.v,e.n=6,Bs(n,s);case 6:e.n=1;break;case 7:Ws(n)&&Xs(n);case 8:return e.a(2)}}),e,null,[[2,5]])})))).apply(this,arguments)}function Hs(e){return Os(e)&&e.Ia.length<10}function Qs(e,t){e.Ia.push(t);var n=cu(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Ws(e){return Os(e)&&!cu(e).O_()&&e.Ia.length>0}function Xs(e){cu(e).start()}function Ys(e){return Js.apply(this,arguments)}function Js(){return(Js=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:cu(t).ia();case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function Zs(e){return $s.apply(this,arguments)}function $s(){return($s=p(o().m((function e(t){var n,r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:n=cu(t),r=l(t.Ia);try{for(r.s();!(i=r.n()).done;)a=i.value,n.ta(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function eu(e,t,n){return tu.apply(this,arguments)}function tu(){return(tu=p(o().m((function e(t,n,r){var i,a;return o().w((function(e){for(;;)switch(e.n){case 0:return i=t.Ia.shift(),a=la.from(i,n,r),e.n=1,zs(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 1:return e.n=2,Ks(t);case 2:return e.a(2)}}),e)})))).apply(this,arguments)}function nu(e,t){return ru.apply(this,arguments)}function ru(){return ru=p(o().m((function e(t,n){return o().w((function(e){for(;;)switch(e.n){case 0:if(!(n&&cu(t).ea)){e.n=1;break}return e.n=1,function(){var e=p(o().m((function e(t,n){var r;return o().w((function(e){for(;;)switch(e.n){case 0:if(!function(e){return da(e)&&e!==Ht.ABORTED}(n.code)){e.n=2;break}return r=t.Ia.shift(),cu(t).L_(),e.n=1,zs(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 1:return e.n=2,Ks(t);case 2:return e.a(2)}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 1:Ws(t)&&Xs(t);case 2:return e.a(2)}}),e)}))),ru.apply(this,arguments)}function iu(e,t){return au.apply(this,arguments)}function au(){return(au=p(o().m((function e(t,n){var r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return(r=Gt(t)).asyncQueue.verifyOperationInProgress(),Ft(ks,"RemoteStore received new credentials"),i=Os(r),r.da.add(3),e.n=1,Ts(r);case 1:return i&&r.Va.set("Unknown"),e.n=2,r.remoteSyncer.handleCredentialChange(n);case 2:return r.da.delete(3),e.n=3,bs(r);case 3:return e.a(2)}}),e)})))).apply(this,arguments)}function ou(e,t){return su.apply(this,arguments)}function su(){return(su=p(o().m((function e(t,n){var r;return o().w((function(e){for(;;)switch(e.n){case 0:if(r=Gt(t),!n){e.n=2;break}return r.da.delete(2),e.n=1,bs(r);case 1:e.n=4;break;case 2:if(n){e.n=4;break}return r.da.add(2),e.n=3,Ts(r);case 3:r.Va.set("Unknown");case 4:return e.a(2)}}),e)})))).apply(this,arguments)}function uu(e){return e.fa||(e.fa=function(e,t,n){var r=Gt(e);return r.oa(),new ps(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}(e.datastore,e.asyncQueue,{e_:Rs.bind(null,e),n_:Ms.bind(null,e),i_:Vs.bind(null,e),Y_:Us.bind(null,e)}),e.Aa.push(function(){var t=p(o().m((function t(n){return o().w((function(t){for(;;)switch(t.n){case 0:if(!n){t.n=1;break}e.fa.L_(),Ns(e)?Ds(e):e.Va.set("Unknown"),t.n=3;break;case 1:return t.n=2,e.fa.stop();case 2:xs(e);case 3:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.fa}function cu(e){return e.ga||(e.ga=function(e,t,n){var r=Gt(e);return r.oa(),new ys(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:function(){return Promise.resolve()},n_:Ys.bind(null,e),i_:nu.bind(null,e),na:Zs.bind(null,e),ra:eu.bind(null,e)}),e.Aa.push(function(){var t=p(o().m((function t(n){return o().w((function(t){for(;;)switch(t.n){case 0:if(!n){t.n=2;break}return e.ga.L_(),t.n=1,Ks(e);case 1:t.n=4;break;case 2:return t.n=3,e.ga.stop();case 3:e.Ia.length>0&&(Ft(ks,"Stopping write stream with ".concat(e.Ia.length," pending writes")),e.Ia=[]);case 4:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.ga
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var lu=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qt(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}])}();function hu(e,t){if(Ut("AsyncQueue","".concat(t,": ").concat(e)),Dn(e))return new Qt(Ht.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var fu,du,vu=function(){function e(t){k(this,e),this.comparator=t?function(e,n){return t(e,n)||bn.comparator(e.key,n.key)}:function(e,t){return bn.comparator(e.key,t.key)},this.keyedMap=wi(),this.sortedSet=new Fn(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}])}(),pu=function(){return g((function e(){k(this,e),this.pa=new Fn(bn.comparator)}),[{key:"track",value:function(e){var t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):qt(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}},{key:"wa",value:function(){var e=[];return this.pa.inorderTraversal((function(t,n){e.push(n)})),e}}])}(),yu=function(){function e(t,n,r,i,a,o,s,u,c){k(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&li(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,vu.emptySet(n),o,r,i,!0,!1,a)}}])}(),gu=function(){return g((function e(){k(this,e),this.ba=void 0,this.Sa=[]}),[{key:"Da",value:function(){return this.Sa.some((function(e){return e.va()}))}}])}(),mu=function(){return g((function e(){k(this,e),this.queries=ku(),this.onlineState="Unknown",this.Ca=new Set}),[{key:"terminate",value:function(){var e,t,n,r;e=this,t=new Qt(Ht.ABORTED,"Firestore shutting down"),n=Gt(e),r=n.queries,n.queries=ku(),r.forEach((function(e,n){var r,i=l(n.Sa);try{for(i.s();!(r=i.n()).done;)r.value.onError(t)}catch(a){i.e(a)}finally{i.f()}}))}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function ku(){return new yi((function(e){return hi(e)}),li)}function wu(e,t){return bu.apply(this,arguments)}function bu(){return(bu=p(o().m((function e(t,n){var r,i,a,s,u,c,l;return o().w((function(e){for(;;)switch(e.n){case 0:r=Gt(t),i=3,a=n.query,(s=r.queries.get(a))?!s.Da()&&n.va()&&(i=2):(s=new gu,i=n.va()?0:1),e.p=1,c=i,e.n=0===c?2:1===c?4:2===c?6:7;break;case 2:return e.n=3,r.onListen(a,!0);case 3:return s.ba=e.v,e.a(3,7);case 4:return e.n=5,r.onListen(a,!1);case 5:return s.ba=e.v,e.a(3,7);case 6:return e.n=7,r.onFirstRemoteStoreListen(a);case 7:e.n=9;break;case 8:return e.p=8,l=e.v,u=hu(l,"Initialization of query '".concat(fi(n.query),"' failed")),e.a(2,void n.onError(u));case 9:r.queries.set(a,s),s.Sa.push(n),n.Fa(r.onlineState),s.ba&&n.Ma(s.ba)&&Cu(r);case 10:return e.a(2)}}),e,null,[[1,8]])})))).apply(this,arguments)}function Eu(e,t){return Tu.apply(this,arguments)}function Tu(){return(Tu=p(o().m((function e(t,n){var r,i,a,s,u,c;return o().w((function(e){for(;;)switch(e.n){case 0:r=Gt(t),i=n.query,a=3,(s=r.queries.get(i))&&(u=s.Sa.indexOf(n))>=0&&(s.Sa.splice(u,1),0===s.Sa.length?a=n.va()?0:1:!s.Da()&&n.va()&&(a=2)),c=a,e.n=0===c?1:1===c?2:2===c?3:4;break;case 1:return e.a(2,(r.queries.delete(i),r.onUnlisten(i,!0)));case 2:return e.a(2,(r.queries.delete(i),r.onUnlisten(i,!1)));case 3:return e.a(2,r.onLastRemoteStoreUnlisten(i));case 4:case 5:return e.a(2)}}),e)})))).apply(this,arguments)}function _u(e,t){var n,r=Gt(e),i=!1,a=l(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,h=l(u.Sa);try{for(h.s();!(c=h.n()).done;){c.value.Ma(o)&&(i=!0)}}catch(f){h.e(f)}finally{h.f()}u.ba=o}}}catch(f){a.e(f)}finally{a.f()}i&&Cu(r)}function Iu(e,t,n){var r=Gt(e),i=r.queries.get(t);if(i){var a,o=l(i.Sa);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Cu(e){e.Ca.forEach((function(e){e.next()}))}(du=fu||(fu={})).xa="default",du.Cache="cache";var Su=function(){return g((function e(t,n,r){k(this,e),this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}),[{key:"Ma",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=l(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new yu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Na?this.La(e)&&(this.Oa.next(e),a=!0):this.ka(e,this.onlineState)&&(this.qa(e),a=!0),this.Ba=e,a}},{key:"onError",value:function(e){this.Oa.error(e)}},{key:"Fa",value:function(e){this.onlineState=e;var t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}},{key:"ka",value:function(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;var n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"La",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"qa",value:function(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}},{key:"va",value:function(){return this.options.source!==fu.Cache}}])}(),Au=g((function e(t){k(this,e),this.key=t})),Du=g((function e(t){k(this,e),this.key=t})),Nu=function(){return g((function e(t,n){k(this,e),this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Si(),this.mutatedKeys=Si(),this.Za=vi(t),this.Xa=new vu(this.Za)}),[{key:"eu",get:function(){return this.Ha}},{key:"tu",value:function(e,t){var n=this,r=t?t.nu:new pu,i=t?t.Xa:this.Xa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=di(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),v=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),v=!0):n.ru(l,h)||(r.track({type:2,doc:h}),v=!0,(u&&n.Za(h,u)>0||c&&n.Za(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),v=!0):l&&!h&&(r.track({type:1,doc:l}),v=!0,(u||c)&&(s=!0)),v&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}},{key:"ru",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;var o=e.nu.wa();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Vt:e})}};return n(e)-n(t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e.type,t.type)||i.Za(e.doc,t.doc)})),this.iu(n),r=null!=r&&r;var s=t&&!r?this.su():[],u=0===this.Ya.size&&this.current&&!r?1:0,c=u!==this.Ja;return this.Ja=u,0!==o.length||c?{snapshot:new yu(this.query,e.Xa,a,o,e.mutatedKeys,0===u,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}},{key:"Fa",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new pu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}},{key:"_u",value:function(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}},{key:"iu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ha=t.Ha.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ha=t.Ha.delete(e)})),this.current=e.current)}},{key:"su",value:function(){var e=this;if(!this.current)return[];var t=this.Ya;this.Ya=Si(),this.Xa.forEach((function(t){e._u(t.key)&&(e.Ya=e.Ya.add(t.key))}));var n=[];return t.forEach((function(t){e.Ya.has(t)||n.push(new Du(t))})),this.Ya.forEach((function(e){t.has(e)||n.push(new Au(e))})),n}},{key:"au",value:function(e){this.Ha=e.$s,this.Ya=Si();var t=this.tu(e.documents);return this.applyChanges(t,!0)}},{key:"uu",value:function(){return yu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}])}(),Ou="SyncEngine",xu=g((function e(t,n,r){k(this,e),this.query=t,this.targetId=n,this.view=r})),Ru=g((function e(t){k(this,e),this.key=t,this.cu=!1})),Lu=function(){return g((function e(t,n,r,i,a,o){k(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new yi((function(e){return hi(e)}),li),this.Pu=new Map,this.Tu=new Set,this.Iu=new Fn(bn.comparator),this.Eu=new Map,this.du=new Co,this.Au={},this.Ru=new Map,this.Vu=vo.lr(),this.onlineState="Unknown",this.mu=void 0}),[{key:"isPrimaryClient",get:function(){return!0===this.mu}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Mu(e,t){return Pu.apply(this,arguments)}function Pu(){return Pu=p(o().m((function e(t,n){var r,i,a,s,u=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:if(r=!(u.length>2&&void 0!==u[2])||u[2],i=yc(t),!(s=i.hu.get(n))){e.n=1;break}i.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.uu(),e.n=3;break;case 1:return e.n=2,Uu(i,n,r,!0);case 2:a=e.v;case 3:return e.a(2,a)}}),e)}))),Pu.apply(this,arguments)}function Vu(e,t){return Fu.apply(this,arguments)}function Fu(){return(Fu=p(o().m((function e(t,n){var r;return o().w((function(e){for(;;)switch(e.n){case 0:return r=yc(t),e.n=1,Uu(r,n,!0,!1);case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function Uu(e,t,n,r){return ju.apply(this,arguments)}function ju(){return(ju=p(o().m((function e(t,n,r,i){var a,s,u,c;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Qo(t.localStore,si(n));case 1:if(a=e.v,s=a.targetId,u=t.sharedClientState.addLocalQueryTarget(s,r),!i){e.n=3;break}return e.n=2,Bu(t,n,s,"current"===u,a.resumeToken);case 2:c=e.v;case 3:return t.isPrimaryClient&&r&&Is(t.remoteStore,a),e.a(2,c)}}),e)})))).apply(this,arguments)}function Bu(e,t,n,r,i){return qu.apply(this,arguments)}function qu(){return qu=p(o().m((function e(t,n,r,i,a){var s,u,c,l,h,f;return o().w((function(e){for(;;)switch(e.n){case 0:return t.fu=function(e,n,r){return(i=p(o().m((function e(t,n,r,i){var a,s,u,c;return o().w((function(e){for(;;)switch(e.n){case 0:if(!(a=n.view.tu(r)).Cs){e.n=2;break}return e.n=1,Yo(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.tu(t,a)}));case 1:a=e.v;case 2:return s=i&&i.targetChanges.get(n.targetId),u=i&&null!=i.targetMismatches.get(n.targetId),c=n.view.applyChanges(a,t.isPrimaryClient,s,u),e.a(2,(uc(t,n.targetId,c.ou),c.snapshot))}}),e)}))),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.n=1,Yo(t.localStore,n,!0);case 1:return s=e.v,u=new Nu(n,s.$s),c=u.tu(s.documents),l=ba.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=u.applyChanges(c,t.isPrimaryClient,l),uc(t,r,h.ou),f=new xu(n,r,u),e.a(2,(t.hu.set(n,f),t.Pu.has(r)?t.Pu.get(r).push(n):t.Pu.set(r,[n]),h.snapshot))}}),e)}))),qu.apply(this,arguments)}function zu(e,t,n){return Ku.apply(this,arguments)}function Ku(){return(Ku=p(o().m((function e(t,n,r){var i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:if(i=Gt(t),a=i.hu.get(n),!((s=i.Pu.get(a.targetId)).length>1)){e.n=1;break}return e.a(2,(i.Pu.set(a.targetId,s.filter((function(e){return!li(e,n)}))),void i.hu.delete(n)));case 1:if(!i.isPrimaryClient){e.n=3;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)){e.n=2;break}return e.n=2,Wo(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),r&&Cs(i.remoteStore,a.targetId),oc(i,a.targetId)})).catch(Cn);case 2:e.n=4;break;case 3:return oc(i,a.targetId),e.n=4,Wo(i.localStore,a.targetId,!0);case 4:return e.a(2)}}),e)})))).apply(this,arguments)}function Gu(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=p(o().m((function e(t,n){var r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:r=Gt(t),i=r.hu.get(n),a=r.Pu.get(i.targetId),r.isPrimaryClient&&1===a.length&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),Cs(r.remoteStore,i.targetId));case 1:return e.a(2)}}),e)})))).apply(this,arguments)}function Qu(e,t,n){return Wu.apply(this,arguments)}function Wu(){return(Wu=p(o().m((function e(t,n,r){var i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:return i=gc(t),e.p=1,e.n=2,function(e,t){var n,r,i=Gt(e),a=vn.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Si());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=mi(),u=Si();return i.Bs.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=l(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=Zi(c,n.get(c.key).overlayedDocument);null!=h&&s.push(new ta(c.key,h,Ar(h.value.mapValue),Hi.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:bi(n)}}))}(i.localStore,n);case 2:return a=e.v,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Au[e.currentUser.toKey()];r||(r=new Fn(sn)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(i,a.batchId,r),e.n=3,hc(i,a.changes);case 3:return e.n=4,Ks(i.remoteStore);case 4:e.n=6;break;case 5:e.p=5,u=e.v,s=hu(u,"Failed to persist write"),r.reject(s);case 6:return e.a(2)}}),e,null,[[1,5]])})))).apply(this,arguments)}function Xu(e,t){return Yu.apply(this,arguments)}function Yu(){return(Yu=p(o().m((function e(t,n){var r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:return r=Gt(t),e.p=1,e.n=2,Go(r.localStore,n);case 2:return i=e.v,n.targetChanges.forEach((function(e,t){var n=r.Eu.get(t);n&&(Kt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?n.cu=!0:e.modifiedDocuments.size>0?Kt(n.cu,14607):e.removedDocuments.size>0&&(Kt(n.cu,42227),n.cu=!1))})),e.n=3,hc(r,i,n);case 3:e.n=5;break;case 4:return e.p=4,a=e.v,e.n=5,Cn(a);case 5:return e.a(2)}}),e,null,[[1,4]])})))).apply(this,arguments)}function Ju(e,t,n){var r=Gt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.hu.forEach((function(e,n){var r=n.view.Fa(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gt(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=l(n.Sa);try{for(a.s();!(i=a.n()).done;){i.value.Fa(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Cu(n)}(r.eventManager,t),i.length&&r.lu.Y_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Zu(e,t,n){return $u.apply(this,arguments)}function $u(){return($u=p(o().m((function e(t,n,r){var i,a,s,u,c,l;return o().w((function(e){for(;;)switch(e.n){case 0:if((i=Gt(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Eu.get(n),!(s=a&&a.key)){e.n=2;break}return u=(u=new Fn(bn.comparator)).insert(s,Dr.newNoDocument(s,pn.min())),c=Si().add(s),l=new wa(pn.min(),new Map,new Fn(sn),u,c),e.n=1,Xu(i,l);case 1:i.Iu=i.Iu.remove(s),i.Eu.delete(n),lc(i),e.n=3;break;case 2:return e.n=3,Wo(i.localStore,n,!1).then((function(){return oc(i,n,r)})).catch(Cn);case 3:return e.a(2)}}),e)})))).apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return(tc=p(o().m((function e(t,n){var r,i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:return r=Gt(t),i=n.batch.batchId,e.p=1,e.n=2,zo(r.localStore,n);case 2:return a=e.v,ac(r,i,null),ic(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.n=3,hc(r,a);case 3:e.n=5;break;case 4:return e.p=4,s=e.v,e.n=5,Cn(s);case 5:return e.a(2)}}),e,null,[[1,4]])})))).apply(this,arguments)}function nc(e,t,n){return rc.apply(this,arguments)}function rc(){return(rc=p(o().m((function e(t,n,r){var i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:return i=Gt(t),e.p=1,e.n=2,function(e,t){var n=Gt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Kt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 2:return a=e.v,ac(i,n,r),ic(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.n=3,hc(i,a);case 3:e.n=5;break;case 4:return e.p=4,s=e.v,e.n=5,Cn(s);case 5:return e.a(2)}}),e,null,[[1,4]])})))).apply(this,arguments)}function ic(e,t){(e.Ru.get(t)||[]).forEach((function(e){e.resolve()})),e.Ru.delete(t)}function ac(e,t,n){var r=Gt(e),i=r.Au[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Au[r.currentUser.toKey()]=i}}function oc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=l(e.Pu.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.hu.delete(a),n&&e.lu.gu(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach((function(t){e.du.containsKey(t)||sc(e,t)}))}function sc(e,t){e.Tu.delete(t.path.canonicalString());var n=e.Iu.get(t);null!==n&&(Cs(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),lc(e))}function uc(e,t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Au?(e.du.addReference(a.key,t),cc(e,a)):a instanceof Du?(Ft(Ou,"Document no longer in limbo: "+a.key),e.du.removeReference(a.key,t),e.du.containsKey(a.key)||sc(e,a.key)):qt(19791,{pu:a})}}catch(o){i.e(o)}finally{i.f()}}function cc(e,t){var n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(Ft(Ou,"New document in limbo: "+n),e.Tu.add(r),lc(e))}function lc(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){var t=e.Tu.values().next().value;e.Tu.delete(t);var n=new bn(mn.fromString(t)),r=e.Vu.next();e.Eu.set(r,new Ru(n)),e.Iu=e.Iu.insert(n,r),Is(e.remoteStore,new ao(si(ri(n.path)),r,"TargetPurposeLimboResolution",Nn.le))}}function hc(e,t,n){return fc.apply(this,arguments)}function fc(){return fc=p(o().m((function e(t,n,r){var i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:if(i=Gt(t),a=[],s=[],u=[],i.hu.isEmpty()){e.n=2;break}return i.hu.forEach((function(e,t){u.push(i.fu(t,n,r).then((function(e){var n;if((e||r)&&i.isPrimaryClient){var o=e?!e.fromCache:null===(n=null==r?void 0:r.targetChanges.get(t.targetId))||void 0===n?void 0:n.current;i.sharedClientState.updateQueryState(t.targetId,o?"current":"not-current")}if(e){a.push(e);var u=Po.Rs(t.targetId,e);s.push(u)}})))})),e.n=1,Promise.all(u);case 1:return i.lu.Y_(a),e.n=2,function(){var e=p(o().m((function e(t,n){var r,i,a,s,u,c,h,f,d;return o().w((function(e){for(;;)switch(e.n){case 0:return r=Gt(t),e.p=1,e.n=2,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return An.forEach(n,(function(t){return An.forEach(t.ds,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return An.forEach(t.As,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 2:e.n=5;break;case 3:if(e.p=3,Dn(d=e.v)){e.n=4;break}throw d;case 4:Ft(Uo,"Failed to update sequence numbers: "+d);case 5:i=l(n);try{for(i.s();!(a=i.n()).done;)s=a.value,u=s.targetId,s.fromCache||(c=r.xs.get(u),h=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(h),r.xs=r.xs.insert(u,f))}catch(o){i.e(o)}finally{i.f()}case 6:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 2:return e.a(2)}}),e)}))),fc.apply(this,arguments)}function dc(e,t){return vc.apply(this,arguments)}function vc(){return(vc=p(o().m((function e(t,n){var r,i;return o().w((function(e){for(;;)switch(e.n){case 0:if((r=Gt(t)).currentUser.isEqual(n)){e.n=2;break}return Ft(Ou,"User change. New user:",n.toKey()),e.n=1,Bo(r.localStore,n);case 1:return i=e.v,r.currentUser=n,function(e,t){e.Ru.forEach((function(e){e.forEach((function(e){e.reject(new Qt(Ht.CANCELLED,t))}))})),e.Ru.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.n=2,hc(r,i.ks);case 2:return e.a(2)}}),e)})))).apply(this,arguments)}function pc(e,t){var n=Gt(e),r=n.Eu.get(t);if(r&&r.cu)return Si().add(r.key);var i=Si(),a=n.Pu.get(t);if(!a)return i;var o,s=l(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.hu.get(u);i=i.unionWith(c.view.eu)}}catch(h){s.e(h)}finally{s.f()}return i}function yc(e){var t=Gt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zu.bind(null,t),t.lu.Y_=_u.bind(null,t.eventManager),t.lu.gu=Iu.bind(null,t.eventManager),t}function gc(e){var t=Gt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ec.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nc.bind(null,t),t}var mc=function(){return g((function e(){k(this,e),this.kind="memory",this.synchronizeTabs=!1}),[{key:"initialize",value:(t=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:return this.serializer=hs(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),e.n=1,this.persistence.start();case 1:this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore);case 2:return e.a(2)}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"vu",value:function(e,t){return null}},{key:"Cu",value:function(e,t){return null}},{key:"Du",value:function(e){return function(e,t,n,r){return new jo(e,t,n,r)}(this.persistence,new Fo,e.initialUser,this.serializer)}},{key:"Su",value:function(e){return new xo(Lo.fi,this.serializer)}},{key:"bu",value:function(e){return new Zo}},{key:"terminate",value:(e=p(o().m((function e(){var t,n;return o().w((function(e){for(;;)switch(e.n){case 0:return null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(n=this.indexBackfillerScheduler)||void 0===n||n.stop(),this.sharedClientState.shutdown(),e.n=1,this.persistence.shutdown();case 1:return e.a(2)}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}();mc.provider={build:function(){return new mc}};var kc=function(e){function t(e){var n;return k(this,t),(n=w(this,t)).cacheSizeBytes=e,n}return b(t,e),g(t,[{key:"vu",value:function(e,t){Kt(this.persistence.referenceDelegate instanceof Mo,46915);var n=this.persistence.referenceDelegate.garbageCollector;return new mo(n,e.asyncQueue,t)}},{key:"Su",value:function(e){var t=void 0!==this.cacheSizeBytes?fo.withCacheSize(this.cacheSizeBytes):fo.DEFAULT;return new xo((function(e){return Mo.fi(e,t)}),this.serializer)}}])}(mc),wc=function(){return g((function e(){k(this,e)}),[{key:"initialize",value:(t=p(o().m((function e(t,n){var r=this;return o().w((function(e){for(;;)switch(e.n){case 0:if(this.localStore){e.n=1;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ju(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dc.bind(null,this.syncEngine),e.n=1,ou(this.remoteStore,this.syncEngine.isPrimaryClient);case 1:return e.a(2)}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new mu}},{key:"createDatastore",value:function(e){var t=hs(e.databaseInfo.databaseId),n=function(e){return new cs(e)}(e.databaseInfo);return function(e,t,n,r){return new gs(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new ws(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Ju(t.syncEngine,e,0)}),ts.C()?new ts:new $o)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Lu(e,t,n,r,i,a);return o&&(s.mu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:(e=p(o().m((function e(){var t,n;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,function(){var e=p(o().m((function e(t){var n;return o().w((function(e){for(;;)switch(e.n){case 0:return n=Gt(t),Ft(ks,"RemoteStore shutting down."),n.da.add(5),e.n=1,Ts(n);case 1:n.Ra.shutdown(),n.Va.set("Unknown");case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore);case 1:null===(t=this.datastore)||void 0===t||t.terminate(),null===(n=this.eventManager)||void 0===n||n.terminate();case 2:return e.a(2)}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}();wc.provider={build:function(){return new wc}};
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var bc=function(){return g((function e(t){k(this,e),this.observer=t,this.muted=!1}),[{key:"next",value:function(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}},{key:"error",value:function(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ut("Uncaught Error in snapshot listener:",e.toString()))}},{key:"xu",value:function(){this.muted=!0}},{key:"Mu",value:function(e,t){var n=this;setTimeout((function(){n.muted||e(t)}),0)}}])}(),Ec="FirestoreClient",Tc=function(){return g((function e(t,n,r,i,a){var s=this;k(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=on.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this._uninitializedComponentsProvider=a,this.authCredentials.start(r,function(){var e=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:return Ft(Ec,"Received user=",t.uid),e.n=1,s.authCredentialListener(t);case 1:s.user=t;case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ft(Ec,"Received new app check token=",e),s.appCheckCredentialListener(e,s.user)}))}),[{key:"configuration",get:function(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(p(o().m((function n(){var r,i;return o().w((function(n){for(;;)switch(n.n){case 0:if(n.p=0,!e._onlineComponents){n.n=1;break}return n.n=1,e._onlineComponents.terminate();case 1:if(!e._offlineComponents){n.n=2;break}return n.n=2,e._offlineComponents.terminate();case 2:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.n=4;break;case 3:n.p=3,i=n.v,r=hu(i,"Failed to shutdown persistence"),t.reject(r);case 4:return n.a(2)}}),n,null,[[0,3]])})))),t.promise}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function _c(e,t){return Ic.apply(this,arguments)}function Ic(){return Ic=p(o().m((function e(t,n){var r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return t.asyncQueue.verifyOperationInProgress(),Ft(Ec,"Initializing OfflineComponentProvider"),r=t.configuration,e.n=1,n.initialize(r);case 1:i=r.initialUser,t.setCredentialChangeListener(function(){var e=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:if(i.isEqual(t)){e.n=2;break}return e.n=1,Bo(n.localStore,t);case 1:i=t;case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 2:return e.a(2)}}),e)}))),Ic.apply(this,arguments)}function Cc(e,t){return Sc.apply(this,arguments)}function Sc(){return(Sc=p(o().m((function e(t,n){var r;return o().w((function(e){for(;;)switch(e.n){case 0:return t.asyncQueue.verifyOperationInProgress(),e.n=1,Ac(t);case 1:return r=e.v,Ft(Ec,"Initializing OnlineComponentProvider"),e.n=2,n.initialize(r,t.configuration);case 2:t.setCredentialChangeListener((function(e){return iu(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return iu(n.remoteStore,t)})),t._onlineComponents=n;case 3:return e.a(2)}}),e)})))).apply(this,arguments)}function Ac(e){return Dc.apply(this,arguments)}function Dc(){return(Dc=p(o().m((function e(t){var n,r;return o().w((function(e){for(;;)switch(e.n){case 0:if(t._offlineComponents){e.n=7;break}if(!t._uninitializedComponentsProvider){e.n=6;break}return Ft(Ec,"Using user provided OfflineComponentProvider"),e.p=1,e.n=2,_c(t,t._uninitializedComponentsProvider._offline);case 2:e.n=5;break;case 3:if(e.p=3,r=e.v,function(e){return"FirebaseError"===e.name?e.code===Ht.FAILED_PRECONDITION||e.code===Ht.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n=r)){e.n=4;break}throw n;case 4:return jt("Error using user provided cache. Falling back to memory cache: "+n),e.n=5,_c(t,new mc);case 5:e.n=7;break;case 6:return Ft(Ec,"Using default OfflineComponentProvider"),e.n=7,_c(t,new kc(void 0));case 7:return e.a(2,t._offlineComponents)}}),e,null,[[1,3]])})))).apply(this,arguments)}function Nc(e){return Oc.apply(this,arguments)}function Oc(){return(Oc=p(o().m((function e(t){return o().w((function(e){for(;;)switch(e.n){case 0:if(t._onlineComponents){e.n=3;break}if(!t._uninitializedComponentsProvider){e.n=2;break}return Ft(Ec,"Using user provided OnlineComponentProvider"),e.n=1,Cc(t,t._uninitializedComponentsProvider._online);case 1:e.n=3;break;case 2:return Ft(Ec,"Using default OnlineComponentProvider"),e.n=3,Cc(t,new wc);case 3:return e.a(2,t._onlineComponents)}}),e)})))).apply(this,arguments)}function xc(e){return Nc(e).then((function(e){return e.syncEngine}))}function Rc(e){return Lc.apply(this,arguments)}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Lc(){return(Lc=p(o().m((function e(t){var n,r;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Nc(t);case 1:return n=e.v,r=n.eventManager,e.a(2,(r.onListen=Mu.bind(null,n.syncEngine),r.onUnlisten=zu.bind(null,n.syncEngine),r.onFirstRemoteStoreListen=Vu.bind(null,n.syncEngine),r.onLastRemoteStoreUnlisten=Gu.bind(null,n.syncEngine),r))}}),e)})))).apply(this,arguments)}function Mc(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var Pc=new Map;
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Vc(e,t,n){if(!n)throw new Qt(Ht.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Fc(e){if(!bn.isDocumentKey(e))throw new Qt(Ht.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Uc(e){if(bn.isDocumentKey(e))throw new Qt(Ht.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function jc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==d(e)){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":qt(12329,{type:d(e)})}function Bc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qt(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jc(e);throw new Qt(Ht.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var qc="firestore.googleapis.com",zc=!0,Kc=function(){return g((function e(t){var n,r;if(k(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Qt(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qc,this.ssl=zc}else this.host=t.host,this.ssl=null!==(n=t.ssl)&&void 0!==n?n:zc;if(this.isUsingEmulator=void 0!==t.emulatorOptions,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=ho;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qt(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Qt(Ht.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mc(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Qt(Ht.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Qt(Ht.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Qt(Ht.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}),[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}])}(),Gc=function(){return g((function e(t,n,r,i){k(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}),[{key:"app",get:function(){if(!this._app)throw new Qt(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return"notTerminated"!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Qt(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kc(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yt;switch(e.type){case"firstParty":return new en(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qt(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_getEmulatorOptions",value:function(){return this._emulatorOptions}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}},{key:"_restart",value:(e=p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:if("notTerminated"!==this._terminateTask){e.n=2;break}return e.n=1,this._terminate();case 1:e.n=3;break;case 2:this._terminateTask="notTerminated";case 3:return e.a(2)}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=Pc.get(e))&&(Ft("ComponentProvider","Removing Datastore"),Pc.delete(e),t.terminate()),Promise.resolve();var e,t}}]);var e}();function Hc(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Bc(e,Gc);var a=$(t),o=e._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),u="".concat(t,":").concat(n);a&&(function(e){ee.apply(this,arguments)}("https://".concat(u)),re("Firestore",!0)),o.host!==qc&&o.host!==u&&jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");var c=Object.assign(Object.assign({},o),{host:u,ssl:a,emulatorOptions:i});if(!le(c,s)&&(e._setSettings(c),i.mockUserToken)){var l,h;if("string"==typeof i.mockUserToken)l=i.mockUserToken,h=Lt.MOCK_USER;else{l=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[H(JSON.stringify({alg:"none",type:"JWT"})),H(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new Qt(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Lt(f)}e._authCredentials=new Jt(new Xt(l,h))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Qc=function(){function e(t,n,r){k(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}])}(),Wc=function(){function e(t,n,r){k(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}])}(),Xc=function(e){function t(e,n,r){var i;return k(this,t),(i=w(this,t,[e,n,ri(r)]))._path=r,i.type="collection",i}return b(t,e),g(t,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Wc(this.firestore,null,new bn(e))}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}}])}(Qc);function Yc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=de(e),Vc("collection","path",t),e instanceof Gc){var a=mn.fromString.apply(mn,[t].concat(r));return Uc(a),new Xc(e,null,a)}if(!(e instanceof Wc||e instanceof Xc))throw new Qt(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(mn.fromString.apply(mn,[t].concat(r)));return Uc(o),new Xc(e.firestore,null,o)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Jc="AsyncQueue",Zc=function(){return g((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();k(this,e),this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new fs(this,"async_queue_retry"),this.rc=function(){var e=ls();e&&Ft(Jc,"Visibility state changed to "+e.visibilityState),t.x_.b_()},this.sc=n;var r=ls();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.rc)}),[{key:"isShuttingDown",get:function(){return this.Yu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.oc(),this._c(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;var t=ls();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}},{key:"enqueue",value:function(e){var t=this;if(this.oc(),this.Yu)return new Promise((function(){}));var n=new Wt;return this._c((function(){return t.Yu&&t.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ju.push(e),t.ac()}))}},{key:"ac",value:(t=p(o().m((function e(){var t,n=this;return o().w((function(e){for(;;)switch(e.n){case 0:if(0===this.Ju.length){e.n=6;break}return e.p=1,e.n=2,this.Ju[0]();case 2:this.Ju.shift(),this.x_.reset(),e.n=5;break;case 3:if(e.p=3,Dn(t=e.v)){e.n=4;break}throw t;case 4:Ft(Jc,"Operation failed with retryable error: "+t);case 5:this.Ju.length>0&&this.x_.y_((function(){return n.ac()}));case 6:return e.a(2)}}),e,this,[[1,3]])}))),function(){return t.apply(this,arguments)})},{key:"_c",value:function(e){var t=this,n=this.sc.then((function(){return t.ec=!0,e().catch((function(e){throw t.Xu=e,t.ec=!1,Ut("INTERNAL UNHANDLED ERROR: ",$c(e)),e})).then((function(e){return t.ec=!1,e}))}));return this.sc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.oc(),this.nc.indexOf(e)>-1&&(t=0);var i=lu.createAndSchedule(this,e,t,n,(function(e){return r.uc(e)}));return this.Zu.push(i),i}},{key:"oc",value:function(){this.Xu&&qt(47125,{cc:$c(this.Xu)})}},{key:"verifyOperationInProgress",value:function(){}},{key:"lc",value:(e=p(o().m((function e(){var t;return o().w((function(e){for(;;)switch(e.n){case 0:return t=this.sc,e.n=1,t;case 1:if(t!==this.sc){e.n=0;break}case 2:return e.a(2)}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"hc",value:function(e){var t,n=l(this.Zu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pc",value:function(e){var t=this;return this.lc().then((function(){t.Zu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=l(t.Zu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lc()}))}},{key:"Tc",value:function(e){this.nc.push(e)}},{key:"uc",value:function(e){var t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}]);var e,t}();function $c(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}function el(e){return function(e,t){if("object"!=d(e)||null===e)return!1;var n,r=e,i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e,["next","error","complete"])}var tl=function(e){function t(e,n,r,i){var a;return k(this,t),(a=w(this,t,[e,n,r,i])).type="firestore",a._queue=new Zc,a._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",a}return b(t,e),g(t,[{key:"_terminate",value:(n=p(o().m((function e(){var t;return o().w((function(e){for(;;)switch(e.n){case 0:if(!this._firestoreClient){e.n=1;break}return t=this._firestoreClient.terminate(),this._queue=new Zc(t),this._firestoreClient=void 0,e.n=1,t;case 1:return e.a(2)}}),e,this)}))),function(){return n.apply(this,arguments)})}]);var n}(Gc);function nl(e){if(e._terminated)throw new Qt(Ht.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new rr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Mc(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Tc(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){var t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e),e._firestoreClient}var rl=function(){function e(t){k(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Gn.fromBase64String(t))}catch(t){throw new Qt(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Gn.fromUint8Array(t))}}])}(),il=function(){return g((function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(n)}),[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}])}(),al=g((function e(t){k(this,e),this._methodName=t})),ol=function(){return g((function e(t,n){if(k(this,e),!isFinite(t)||t<-90||t>90)throw new Qt(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qt(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}),[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}])}(),sl=function(){return g((function e(t){k(this,e),this._values=(t||[]).map((function(e){return e}))}),[{key:"toArray",value:function(){return this._values.map((function(e){return e}))}},{key:"isEqual",value:function(e){return function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}])}(),ul=/^__.*__$/,cl=function(){return g((function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}),[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new ea(e,this.data,t,this.fieldTransforms)}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function ll(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt(40011,{Ic:e})}}var hl=function(){function e(t,n,r,i,a,o){k(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ic",get:function(){return this.settings.Ic}},{key:"dc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Ac",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}},{key:"mc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}},{key:"fc",value:function(e){return this.dc({path:void 0,Rc:!0})}},{key:"gc",value:function(e){return Tl(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ec",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}},{key:"Vc",value:function(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(ll(this.Ic)&&ul.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}])}(),fl=function(){return g((function e(t,n,r){k(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||hs(t)}),[{key:"bc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new hl({Ic:e,methodName:t,wc:n,path:wn.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}])}();function dl(e){var t=e._freezeSettings(),n=hs(e._databaseId);return new fl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vl(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.bc(a.merge||a.mergeFields?2:0,t,n,i);kl("Data must be an object, but it was:",o,r);var s,u,c=gl(r,o);if(a.merge)s=new zn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var h,f=[],d=l(a.mergeFields);try{for(d.s();!(h=d.n()).done;){var v=wl(t,h.value,n);if(!o.contains(v))throw new Qt(Ht.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));_l(f,v)||f.push(v)}}catch(p){d.e(p)}finally{d.f()}s=new zn(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new cl(new Sr(c),s,u)}var pl=function(e){function t(){return k(this,t),w(this,t,arguments)}return b(t,e),g(t,[{key:"_toFieldTransform",value:function(e){return new Ki(e.path,new Pi)}},{key:"isEqual",value:function(e){return e instanceof t}}])}(al);function yl(e,t){if(ml(e=de(e)))return kl("Unsupported field value:",t,e),gl(e,t);if(e instanceof al)return function(e,t){if(!ll(t.Ic))throw t.gc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=l(e);try{for(a.s();!(n=a.n()).done;){var o=yl(n.value,t.fc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=de(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Oi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=vn.fromDate(e);return{timestampValue:La(t.serializer,n)}}if(e instanceof vn){var r=new vn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:La(t.serializer,r)}}if(e instanceof ol)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rl)return{bytesValue:Ma(t.serializer,e._byteString)};if(e instanceof Wc){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.gc("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Fa(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof sl)return function(e,t){return{mapValue:{fields:a(a({},or,{stringValue:cr}),lr,{arrayValue:{values:e.toArray().map((function(e){if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return Di(t.serializer,e)}))}})}}}(e,t);throw t.gc("Unsupported field value: ".concat(jc(e)))}(e,t)}function gl(e,t){var n={};return Vn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pn(e,(function(e,r){var i=yl(r,t.Ac(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ml(e){return!("object"!=d(e)||null===e||e instanceof Array||e instanceof Date||e instanceof vn||e instanceof ol||e instanceof rl||e instanceof Wc||e instanceof al||e instanceof sl)}function kl(e,t,n){if(!ml(n)||!function(e){return"object"==d(e)&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=jc(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function wl(e,t,n){if((t=de(t))instanceof il)return t._internalPath;if("string"==typeof t)return El(e,t);throw Tl("Field path arguments must be of type string or ",e,!1,void 0,n)}var bl=new RegExp("[~\\*/\\[\\]]");function El(e,t,n){if(t.search(bl)>=0)throw Tl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return T(il,u(t.split(".")))._internalPath}catch(r){throw Tl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Tl(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Qt(Ht.INVALID_ARGUMENT,s+e+u)}function _l(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Il=function(){return g((function e(t,n,r,i,a){k(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}),[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Wc(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Cl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Sl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}])}(),Cl=function(e){function n(){return k(this,n),w(this,n,arguments)}return b(n,e),g(n,[{key:"data",value:function(){return t(n,"data",this,3)([])}}])}(Il);function Sl(e,t){return"string"==typeof t?El(e,t):t instanceof il?t._internalPath:t._delegate._internalPath}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Al=g((function e(){k(this,e)})),Dl=function(e){function t(){return k(this,t),w(this,t,arguments)}return b(t,e),g(t)}(Al);var Nl=function(e){function t(e,n,r){var i;return k(this,t),(i=w(this,t))._field=e,i._op=n,i._value=r,i.type="where",i}return b(t,e),g(t,[{key:"_apply",value:function(e){var t=this._parse(e);return Ml(e._query,t),new Qc(e.firestore,e.converter,ui(e._query,t))}},{key:"_parse",value:function(e){var t=dl(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Ll(o,a);var u,c=[],h=l(o);try{for(h.s();!(u=h.n()).done;){var f=u.value;c.push(Rl(r,e,f))}}catch(d){h.e(d)}finally{h.f()}s={arrayValue:{values:c}}}else s=Rl(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Ll(o,a),s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return yl(n,e.bc(r?4:3,t))}(n,t,o,"in"===a||"not-in"===a);return Pr.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,n,r){return new t(e,n,r)}}])}(Dl),Ol=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t)).type=e,r._queryConstraints=n,r}return b(t,e),g(t,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Vr.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=l(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Ml(r,a),r=ui(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Qc(e.firestore,e.converter,ui(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,n){return new t(e,n)}}])}(Al),xl=function(e){function t(e,n){var r;return k(this,t),(r=w(this,t))._field=e,r._direction=n,r.type="orderBy",r}return b(t,e),g(t,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rr(t,n)}(e._query,this._field,this._direction);return new Qc(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ni(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,n){return new t(e,n)}}])}(Dl);function Rl(e,t,n){if("string"==typeof(n=de(n))){if(""===n)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ai(t)&&-1!==n.indexOf("/"))throw new Qt(Ht.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(mn.fromString(n));if(!bn.isDocumentKey(r))throw new Qt(Ht.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wr(e,new bn(r))}if(n instanceof Wc)return wr(e,n._key);throw new Qt(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(jc(n),"."))}function Ll(e,t){if(!Array.isArray(e)||0===e.length)throw new Qt(Ht.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ml(e,t){var n=function(e,t){var n,r=l(e);try{for(r.s();!(n=r.n()).done;){var i,a=l(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Qt(Ht.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qt(Ht.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var Pl=function(){return g((function e(){k(this,e)}),[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qt(62114,{value:e})}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Pn(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertVectorValue",value:function(e){var t,n,r,i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[lr].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((function(e){return Wn(e.doubleValue)}));return new sl(i)}},{key:"convertGeoPoint",value:function(e){return new ol(Wn(e.latitude),Wn(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=tr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nr(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Qn(e);return new vn(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=mn.fromString(e);Kt(io(n),9688,{name:e});var r=new ar(n.get(1),n.get(3)),i=new bn(n.popFirst(5));return r.isEqual(t)||Ut("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Vl=function(){return g((function e(t,n){k(this,e),this.hasPendingWrites=t,this.fromCache=n}),[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}])}(),Fl=function(e){function n(e,t,r,i,a,o){var s;return k(this,n),(s=w(this,n,[e,t,r,i,o]))._firestore=e,s._firestoreImpl=e,s.metadata=a,s}return b(n,e),g(n,[{key:"exists",value:function(){return t(n,"exists",this,3)([])}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Sl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}])}(Il),Ul=function(e){function n(){return k(this,n),w(this,n,arguments)}return b(n,e),g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(n,"data",this,3)([e])}}])}(Fl),jl=function(){return g((function e(t,n,r,i){k(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vl(i.hasPendingWrites,i.fromCache),this.query=r}),[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ul(n._firestore,n._userDataWriter,r.key,r,new Vl(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qt(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Ul(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ul(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Bl(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}])}();function Bl(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:e})}}var ql=function(e){function t(e){var n;return k(this,t),(n=w(this,t)).firestore=e,n}return b(t,e),g(t,[{key:"convertBytes",value:function(e){return new rl(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wc(this.firestore,null,t)}}])}(Pl);function zl(e,t){var n=Bc(e.firestore,tl),r=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=de(e),1===arguments.length&&(t=on.newId()),Vc("doc","path",t),e instanceof Gc){var a=mn.fromString.apply(mn,[t].concat(r));return Fc(a),new Wc(e,null,new bn(a))}if(!(e instanceof Wc||e instanceof Xc))throw new Qt(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(mn.fromString.apply(mn,[t].concat(r)));return Fc(o),new Wc(e.firestore,e instanceof Xc?e.converter:null,new bn(o))}(e),i=function(e,t){return e?e.toFirestore(t):t}(e.converter,t);return function(e,t){return function(e,t){var n=new Wt;return e.asyncQueue.enqueueAndForget(p(o().m((function r(){var i,a,s,u;return o().w((function(r){for(;;)switch(r.n){case 0:return i=Qu,r.n=1,xc(e);case 1:return a=r.v,s=t,u=n,r.a(2,i(a,s,u))}}),r)})))),n.promise}(nl(e),t)}(n,[vl(dl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Hi.exists(!1))]).then((function(){return r}))}function Kl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,s;e=de(e);var u={includeMetadataChanges:!1,source:"default"},c=0;"object"!=d(n[c])||el(n[c])||(u=n[c],c++);var l,h,f,v={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(el(n[c])){var y=n[c];n[c]=null===(i=y.next)||void 0===i?void 0:i.bind(y),n[c+1]=null===(a=y.error)||void 0===a?void 0:a.bind(y),n[c+2]=null===(s=y.complete)||void 0===s?void 0:s.bind(y)}if(e instanceof Wc)h=Bc(e.firestore,tl),f=ri(e._key.path),l={next:function(t){n[c]&&n[c](function(e,t,n){var r=n.docs.get(t._key),i=new ql(e);return new Fl(e,i,t._key,r,new Vl(n.hasPendingWrites,n.fromCache),t.converter)}(h,e,t))},error:n[c+1],complete:n[c+2]};else{var g=Bc(e,Qc);h=Bc(g.firestore,tl),f=g._query;var m=new ql(h);l={next:function(e){n[c]&&n[c](new jl(h,m,g,e))},error:n[c+1],complete:n[c+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qt(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){var i=new bc(r),a=new Su(t,i,n);return e.asyncQueue.enqueueAndForget(p(o().m((function t(){var n,r,i;return o().w((function(t){for(;;)switch(t.n){case 0:return n=wu,t.n=1,Rc(e);case 1:return r=t.v,i=a,t.a(2,n(r,i))}}),t)})))),function(){i.xu(),e.asyncQueue.enqueueAndForget(p(o().m((function t(){var n,r,i;return o().w((function(t){for(;;)switch(t.n){case 0:return n=Eu,t.n=1,Rc(e);case 1:return r=t.v,i=a,t.a(2,n(r,i))}}),t)}))))}}(nl(h),f,v,l)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mt=e}("11.9.0"),Je(new ve("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new tl(new Zt(e.getProvider("auth-internal")),new nn(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qt(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ar(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),it(xt,Rt,e),it(xt,Rt,"esm2017")}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
it("firebase","11.9.1","app");var Gl="@firebase/installations",Hl="0.6.17",Ql=1e4,Wl="w:".concat(Hl),Xl="FIS_v2",Yl=36e5,Jl=a(a(a(a(a(a({},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),"not-registered","Firebase Installation is not registered."),"installation-not-found","Firebase Installation not found."),"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),"app-offline","Could not process request. Application offline."),"delete-pending-registration","Can't delete installation while there is a pending registration request."),Zl=new ue("installations","Installations",Jl);function $l(e){return e instanceof se&&e.code.includes("request-failed")}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function eh(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function th(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function nh(e,t){return rh.apply(this,arguments)}function rh(){return(rh=p(o().m((function e(t,n){var r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,n.json();case 1:return r=e.v,i=r.error,e.a(2,Zl.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}))}}),e)})))).apply(this,arguments)}function ih(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ah(e,t){var n=t.refreshToken,r=ih(e);return r.append("Authorization",function(e){return"".concat(Xl," ").concat(e)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(n)),r}function oh(e){return sh.apply(this,arguments)}function sh(){return(sh=p(o().m((function e(t){var n;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,t();case 1:if(!((n=e.v).status>=500&&n.status<600)){e.n=2;break}return e.a(2,t());case 2:return e.a(2,n)}}),e)})))).apply(this,arguments)}function uh(e,t){return ch.apply(this,arguments)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function ch(){return(ch=p(o().m((function e(t,n){var r,i,a,s,u,c,l,h,f,d,v,p;return o().w((function(e){for(;;)switch(e.n){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,s=eh(r),u=ih(r),!(c=i.getImmediate({optional:!0}))){e.n=2;break}return e.n=1,c.getHeartbeatsHeader();case 1:(l=e.v)&&u.append("x-firebase-client",l);case 2:return h={fid:a,authVersion:Xl,appId:r.appId,sdkVersion:Wl},f={method:"POST",headers:u,body:JSON.stringify(h)},e.n=3,oh((function(){return fetch(s,f)}));case 3:if(!(d=e.v).ok){e.n=5;break}return e.n=4,d.json();case 4:return v=e.v,p={fid:v.fid||a,registrationStatus:2,refreshToken:v.refreshToken,authToken:th(v.authToken)},e.a(2,p);case 5:return e.n=6,nh("Create Installation",d);case 6:throw e.v;case 7:return e.a(2)}}),e)})))).apply(this,arguments)}function lh(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var hh=/^[cdef][\w-]{21}$/;function fh(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,u(n))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e);return hh.test(t)?t:""}catch(n){return""}}function dh(e){return"".concat(e.appName,"!").concat(e.appId)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var vh=new Map;function ph(e,t){var n=dh(e);yh(n,t),function(e,t){var n=function(){!gh&&"BroadcastChannel"in self&&((gh=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){yh(e.data.key,e.data.fid)});return gh}();n&&n.postMessage({key:e,fid:t});0===vh.size&&gh&&(gh.close(),gh=null)}(n,t)}function yh(e,t){var n=vh.get(e);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var gh=null;
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var mh="firebase-installations-store",kh=null;function wh(){return kh||(kh=Pe("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(mh)}})),kh}function bh(e,t){return Eh.apply(this,arguments)}function Eh(){return Eh=p(o().m((function e(t,n){var r,i,a,s,u;return o().w((function(e){for(;;)switch(e.n){case 0:return r=dh(t),e.n=1,wh();case 1:return i=e.v,a=i.transaction(mh,"readwrite"),s=a.objectStore(mh),e.n=2,s.get(r);case 2:return u=e.v,e.n=3,s.put(n,r);case 3:return e.n=4,a.done;case 4:return u&&u.fid===n.fid||ph(t,n.fid),e.a(2,n)}}),e)}))),Eh.apply(this,arguments)}function Th(e){return _h.apply(this,arguments)}function _h(){return _h=p(o().m((function e(t){var n,r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return n=dh(t),e.n=1,wh();case 1:return r=e.v,i=r.transaction(mh,"readwrite"),e.n=2,i.objectStore(mh).delete(n);case 2:return e.n=3,i.done;case 3:return e.a(2)}}),e)}))),_h.apply(this,arguments)}function Ih(e,t){return Ch.apply(this,arguments)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Ch(){return Ch=p(o().m((function e(t,n){var r,i,a,s,u,c;return o().w((function(e){for(;;)switch(e.n){case 0:return r=dh(t),e.n=1,wh();case 1:return i=e.v,a=i.transaction(mh,"readwrite"),s=a.objectStore(mh),e.n=2,s.get(r);case 2:if(u=e.v,void 0!==(c=n(u))){e.n=4;break}return e.n=3,s.delete(r);case 3:e.n=5;break;case 4:return e.n=5,s.put(c,r);case 5:return e.n=6,a.done;case 6:return!c||u&&u.fid===c.fid||ph(t,c.fid),e.a(2,c)}}),e)}))),Ch.apply(this,arguments)}function Sh(e){return Ah.apply(this,arguments)}function Ah(){return(Ah=p(o().m((function e(t){var n,r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Ih(t.appConfig,(function(e){var r=Dh(e),i=Nh(t,r);return n=i.registrationPromise,i.installationEntry}));case 1:if(""!==(r=e.v).fid){e.n=3;break}return e.n=2,n;case 2:return i=e.v,e.a(2,{installationEntry:i});case 3:return e.a(2,{installationEntry:r,registrationPromise:n})}}),e)})))).apply(this,arguments)}function Dh(e){return Mh(e||{fid:fh(),registrationStatus:0})}function Nh(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Zl.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return Oh.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:xh(e)}:{installationEntry:t}}function Oh(){return(Oh=p(o().m((function e(t,n){var r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,uh(t,n);case 1:return r=e.v,e.a(2,bh(t.appConfig,r));case 2:if(e.p=2,!$l(i=e.v)||409!==i.customData.serverCode){e.n=4;break}return e.n=3,Th(t.appConfig);case 3:e.n=5;break;case 4:return e.n=5,bh(t.appConfig,{fid:n.fid,registrationStatus:0});case 5:throw i;case 6:return e.a(2)}}),e,null,[[0,2]])})))).apply(this,arguments)}function xh(e){return Rh.apply(this,arguments)}function Rh(){return(Rh=p(o().m((function e(t){var n,r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Lh(t.appConfig);case 1:n=e.v;case 2:if(1!==n.registrationStatus){e.n=5;break}return e.n=3,lh(100);case 3:return e.n=4,Lh(t.appConfig);case 4:n=e.v,e.n=2;break;case 5:if(0!==n.registrationStatus){e.n=8;break}return e.n=6,Sh(t);case 6:if(r=e.v,i=r.installationEntry,!(a=r.registrationPromise)){e.n=7;break}return e.a(2,a);case 7:return e.a(2,i);case 8:return e.a(2,n)}}),e)})))).apply(this,arguments)}function Lh(e){return Ih(e,(function(e){if(!e)throw Zl.create("installation-not-found");return Mh(e)}))}function Mh(e){return 1===(t=e).registrationStatus&&t.registrationTime+Ql<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}function Ph(e,t){return Vh.apply(this,arguments)}function Vh(){return(Vh=p(o().m((function e(t,n){var r,i,a,s,u,c,l,h,f,d,v;return o().w((function(e){for(;;)switch(e.n){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=Fh(r,n),s=ah(r,n),!(u=i.getImmediate({optional:!0}))){e.n=2;break}return e.n=1,u.getHeartbeatsHeader();case 1:(c=e.v)&&s.append("x-firebase-client",c);case 2:return l={installation:{sdkVersion:Wl,appId:r.appId}},h={method:"POST",headers:s,body:JSON.stringify(l)},e.n=3,oh((function(){return fetch(a,h)}));case 3:if(!(f=e.v).ok){e.n=5;break}return e.n=4,f.json();case 4:return d=e.v,v=th(d),e.a(2,v);case 5:return e.n=6,nh("Generate Auth Token",f);case 6:throw e.v;case 7:return e.a(2)}}),e)})))).apply(this,arguments)}function Fh(e,t){var n=t.fid;return"".concat(eh(e),"/").concat(n,"/authTokens:generate")}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Uh(e){return jh.apply(this,arguments)}function jh(){return jh=p(o().m((function e(t){var n,r,i,a,s,u=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],e.n=1,Ih(t.appConfig,(function(e){if(!Hh(e))throw Zl.create("not-registered");var i=e.authToken;if(!n&&Qh(i))return e;if(1===i.requestStatus)return r=Bh(t,n),e;if(!navigator.onLine)throw Zl.create("app-offline");var a=Wh(e);return r=Kh(t,a),a}));case 1:if(i=e.v,!r){e.n=3;break}return e.n=2,r;case 2:s=e.v,e.n=4;break;case 3:s=i.authToken;case 4:return a=s,e.a(2,a)}}),e)}))),jh.apply(this,arguments)}function Bh(e,t){return qh.apply(this,arguments)}function qh(){return(qh=p(o().m((function e(t,n){var r,i;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,zh(t.appConfig);case 1:r=e.v;case 2:if(1!==r.authToken.requestStatus){e.n=5;break}return e.n=3,lh(100);case 3:return e.n=4,zh(t.appConfig);case 4:r=e.v,e.n=2;break;case 5:if(0!==(i=r.authToken).requestStatus){e.n=6;break}return e.a(2,Uh(t,n));case 6:return e.a(2,i);case 7:return e.a(2)}}),e)})))).apply(this,arguments)}function zh(e){return Ih(e,(function(e){if(!Hh(e))throw Zl.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+Ql<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function Kh(e,t){return Gh.apply(this,arguments)}function Gh(){return(Gh=p(o().m((function e(t,n){var r,i,a,s;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Ph(t,n);case 1:return r=e.v,i=Object.assign(Object.assign({},n),{authToken:r}),e.n=2,bh(t.appConfig,i);case 2:return e.a(2,r);case 3:if(e.p=3,!$l(s=e.v)||401!==s.customData.serverCode&&404!==s.customData.serverCode){e.n=5;break}return e.n=4,Th(t.appConfig);case 4:e.n=6;break;case 5:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.n=6,bh(t.appConfig,a);case 6:throw s;case 7:return e.a(2)}}),e,null,[[0,3]])})))).apply(this,arguments)}function Hh(e){return void 0!==e&&2===e.registrationStatus}function Qh(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Yl}(e)}function Wh(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Xh(){return(Xh=p(o().m((function e(t){var n,r,i,a;return o().w((function(e){for(;;)switch(e.n){case 0:return n=t,e.n=1,Sh(n);case 1:return r=e.v,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):Uh(n).catch(console.error),e.a(2,i.fid)}}),e)})))).apply(this,arguments)}function Yh(){return Yh=p(o().m((function e(t){var n,r,i,a=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.n=1,Jh(r);case 1:return e.n=2,Uh(r,n);case 2:return i=e.v,e.a(2,i.token)}}),e)}))),Yh.apply(this,arguments)}function Jh(e){return Zh.apply(this,arguments)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Zh(){return(Zh=p(o().m((function e(t){var n,r;return o().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Sh(t);case 1:if(n=e.v,!(r=n.registrationPromise)){e.n=2;break}return e.n=2,r;case 2:return e.a(2)}}),e)})))).apply(this,arguments)}function $h(e){return Zl.create("missing-app-config-values",{valueName:e})}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var ef="installations",tf=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw $h("App Configuration");if(!e.name)throw $h("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw $h(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ze(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},nf=function(e){var t=Ze(e.getProvider("app").getImmediate(),ef).getImmediate(),n={getId:function(){
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return function(e){return Xh.apply(this,arguments)}(t)},getToken:function(e){return function(e){return Yh.apply(this,arguments)}(t,e)}};return n};Je(new ve(ef,tf,"PUBLIC")),Je(new ve("installations-internal",nf,"PRIVATE")),it(Gl,Hl),it(Gl,Hl,"esm2017");
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var rf="analytics",af="https://www.googletagmanager.com/gtag/js",of=new Ie("@firebase/analytics"),sf=(a(a(a(a(a(a(a(a(a(a(B={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance."),"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),a(a(B,"no-client-id",'The "client_id" field is empty.'),"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}.")),uf=new ue("analytics","Analytics",sf);
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function cf(e){if(!e.startsWith(af)){var t=uf.create("invalid-gtag-resource",{gtagURL:e});return of.warn(t.message),""}return e}function lf(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function hf(e,t){var n=function(e,t){var n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:cf}),r=document.createElement("script"),i="".concat(af,"?l=").concat(e,"&id=").concat(t);r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ff(e,t,n,r,i,a){return df.apply(this,arguments)}function df(){return df=p(o().m((function e(t,n,r,i,a,s){var u,c,l,h;return o().w((function(e){for(;;)switch(e.n){case 0:if(u=i[a],e.p=1,!u){e.n=3;break}return e.n=2,n[u];case 2:e.n=5;break;case 3:return e.n=4,lf(r);case 4:if(c=e.v,!(l=c.find((function(e){return e.measurementId===a})))){e.n=5;break}return e.n=5,n[l.appId];case 5:e.n=7;break;case 6:e.p=6,h=e.v,of.error(h);case 7:t("config",a,s);case 8:return e.a(2)}}),e,null,[[1,6]])}))),df.apply(this,arguments)}function vf(e,t,n,r,i){return pf.apply(this,arguments)}function pf(){return pf=p(o().m((function t(n,r,i,a,s){var u,c,h,f,d,v,p,y;return o().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,u=[],!s||!s.send_to){t.n=9;break}return c=s.send_to,Array.isArray(c)||(c=[c]),t.n=1,lf(i);case 1:h=t.v,f=l(c),t.p=2,v=o().m((function e(){var t,n,i;return o().w((function(e){for(;;)switch(e.n){case 0:if(t=d.value,n=h.find((function(e){return e.measurementId===t})),!(i=n&&r[n.appId])){e.n=1;break}u.push(i),e.n=2;break;case 1:return u=[],e.a(2,1);case 2:return e.a(2)}}),e)})),f.s();case 3:if((d=f.n()).done){t.n=6;break}return t.d(e(v()),4);case 4:if(!t.v){t.n=5;break}return t.a(3,6);case 5:t.n=3;break;case 6:t.n=8;break;case 7:t.p=7,p=t.v,f.e(p);case 8:return t.p=8,f.f(),t.f(8);case 9:return 0===u.length&&(u=Object.values(r)),t.n=10,Promise.all(u);case 10:n("event",a,s||{}),t.n=12;break;case 11:t.p=11,y=t.v,of.error(y);case 12:return t.a(2)}}),t,null,[[2,7,8,9],[0,11]])}))),pf.apply(this,arguments)}function yf(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return i=p(o().m((function i(a){var s,u,c,l,h,f,d,v,p,y,g,m,k,w,b=arguments;return o().w((function(i){for(;;)switch(i.n){case 0:for(i.p=0,s=b.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=b[c];if("event"!==a){i.n=2;break}return l=u[0],h=u[1],i.n=1,vf(e,t,n,l,h);case 1:i.n=5;break;case 2:if("config"!==a){i.n=4;break}return f=u[0],d=u[1],i.n=3,ff(e,t,n,r,f,d);case 3:i.n=5;break;case 4:"consent"===a?(v=u[0],p=u[1],e("consent",v,p)):"get"===a?(y=u[0],g=u[1],m=u[2],e("get",y,g,m)):"set"===a?(k=u[0],e("set",k)):e.apply(void 0,[a].concat(u));case 5:i.n=7;break;case 6:i.p=6,w=i.v,of.error(w);case 7:return i.a(2)}}),i,null,[[0,6]])}))),i.apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function gf(e){for(var t=window.document.getElementsByTagName("script"),n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if(i.src&&i.src.includes(af)&&i.src.includes(e))return i}return null}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var mf=function(){return g((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;k(this,e),this.throttleMetadata=t,this.intervalMillis=n}),[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}])}(),kf=new mf;function wf(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function bf(e){return Ef.apply(this,arguments)}function Ef(){return(Ef=p(o().m((function e(t){var n,r,i,a,s,u,c,l;return o().w((function(e){for(;;)switch(e.n){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:wf(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",r),e.n=1,fetch(s,a);case 1:if(200===(u=e.v).status||304===u.status){e.n=6;break}return c="",e.p=2,e.n=3,u.json();case 3:l=e.v,(null===(n=l.error)||void 0===n?void 0:n.message)&&(c=l.error.message),e.n=5;break;case 4:e.p=4,e.v;case 5:throw uf.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 6:return e.a(2,u.json())}}),e,null,[[2,4]])})))).apply(this,arguments)}function Tf(e){return _f.apply(this,arguments)}function _f(){return _f=p(o().m((function e(t){var n,r,i,a,s,u,c,l=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:kf,r=t.options,i=r.appId,a=r.apiKey,s=r.measurementId,i){e.n=1;break}throw uf.create("no-app-id");case 1:if(a){e.n=3;break}if(!s){e.n=2;break}return e.a(2,{measurementId:s,appId:i});case 2:throw uf.create("no-api-key");case 3:return u=n.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Df,setTimeout(p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:c.abort();case 1:return e.a(2)}}),e)}))),6e4),e.a(2,If({appId:i,apiKey:a,measurementId:s},u,c,n))}}),e)}))),_f.apply(this,arguments)}function If(e,t,n){return Cf.apply(this,arguments)}function Cf(){return Cf=p(o().m((function e(t,n,r){var i,a,s,u,c,l,h,f,d,v,p,y,g=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,s=g.length>3&&void 0!==g[3]?g[3]:kf,c=t.appId,l=t.measurementId,e.p=1,e.n=2,Sf(r,i);case 2:e.n=5;break;case 3:if(e.p=3,p=e.v,!l){e.n=4;break}return of.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==p?void 0:p.message,"]")),e.a(2,{appId:c,measurementId:l});case 4:throw p;case 5:return e.p=5,e.n=6,bf(t);case 6:return h=e.v,s.deleteThrottleMetadata(c),e.a(2,h);case 7:if(e.p=7,y=e.v,Af(f=y)){e.n=9;break}if(s.deleteThrottleMetadata(c),!l){e.n=8;break}return of.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==f?void 0:f.message,"]")),e.a(2,{appId:c,measurementId:l});case 8:throw y;case 9:return d=503===Number(null===(u=null==f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?fe(a,s.intervalMillis,30):fe(a,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+d,backoffCount:a+1},s.setThrottleMetadata(c,v),of.debug("Calling attemptFetch again in ".concat(d," millis")),e.a(2,If(t,v,r,s))}}),e,null,[[5,7],[1,3]])}))),Cf.apply(this,arguments)}function Sf(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(uf.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Af(e){if(!(e instanceof se&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Df=function(){return g((function e(){k(this,e),this.listeners=[]}),[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Nf(){return(Nf=p(o().m((function e(t,n,r,i,a){var s,u;return o().w((function(e){for(;;)switch(e.n){case 0:if(!a||!a.global){e.n=1;break}return t("event",r,i),e.a(2);case 1:return e.n=2,n;case 2:s=e.v,u=Object.assign(Object.assign({},i),{send_to:s}),t("event",r,u);case 3:return e.a(2)}}),e)})))).apply(this,arguments)}function Of(){return xf.apply(this,arguments)}function xf(){return(xf=p(o().m((function e(){var t;return o().w((function(e){for(;;)switch(e.n){case 0:if(ae()){e.n=1;break}return of.warn(uf.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.a(2,!1);case 1:return e.p=1,e.n=2,oe();case 2:e.n=4;break;case 3:return e.p=3,t=e.v,of.warn(uf.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),e.a(2,!1);case 4:return e.a(2,!0)}}),e,null,[[1,3]])})))).apply(this,arguments)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Rf(){return Rf=p(o().m((function e(t,n,r,i,a,s,u){var l,h,f,d,v,p,y,g;return o().w((function(e){for(;;)switch(e.n){case 0:return(h=Tf(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&of.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return of.error(e)})),n.push(h),f=Of().then((function(e){return e?i.getId():void 0})),e.n=1,Promise.all([h,f]);case 1:return d=e.v,v=c(d,2),p=v[0],y=v[1],gf(s)||hf(s,p.measurementId),a("js",new Date),(g=null!==(l=null==u?void 0:u.config)&&void 0!==l?l:{}).origin="firebase",g.update=!0,null!=y&&(g.firebase_id=y),a("config",p.measurementId,g),e.a(2,p.measurementId)}}),e)}))),Rf.apply(this,arguments)}var Lf,Mf,Pf=function(){return g((function e(t){k(this,e),this.app=t}),[{key:"_delete",value:function(){return delete Vf[this.app.options.appId],Promise.resolve()}}])}(),Vf={},Ff=[],Uf={},jf="dataLayer",Bf=!1;function qf(){var e,t=[];if(e="object"===("undefined"==typeof chrome?"undefined":d(chrome))?chrome.runtime:"object"===("undefined"==typeof browser?"undefined":d(browser))?browser.runtime:void 0,"object"===d(e)&&void 0!==e.id&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){var n=t.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),r=uf.create("invalid-analytics-context",{errorInfo:n});of.warn(r.message)}}function zf(e,t,n){qf();var r=e.options.appId;if(!r)throw uf.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw uf.create("no-api-key");of.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Vf[r])throw uf.create("already-exists",{id:r});if(!Bf){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(jf);var i=yf(Vf,Ff,Uf,jf,"gtag"),a=i.wrappedGtag,o=i.gtagCore;Mf=a,Lf=o,Bf=!0}return Vf[r]=function(e,t,n,r,i,a,o){return Rf.apply(this,arguments)}(e,Ff,Uf,t,Lf,jf,n),new Pf(e)}function Kf(e,t,n,r){e=de(e),function(e,t,n,r,i){return Nf.apply(this,arguments)}(Mf,Vf[e.app.options.appId],t,n,r).catch((function(e){return of.error(e)}))}var Gf="@firebase/analytics",Hf="0.10.16";Je(new ve(rf,(function(e,t){var n=t.options;return zf(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Je(new ve("analytics-internal",(function(e){try{var t=e.getProvider(rf).getImmediate();return{logEvent:function(e,n,r){return Kf(t,e,n,r)}}}catch(n){throw uf.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),it(Gf,Hf),it(Gf,Hf,"esm2017");var Qf=nt({apiKey:"AIzaSyD_74XUzjWUSb03lwgtHPdxz0NDV1ml07o",authDomain:"minutechatapp.firebaseapp.com",projectId:"minutechatapp",storageBucket:"minutechatapp.firebasestorage.app",messagingSenderId:"116866467872",appId:"1:116866467872:web:ce16a8d0a17a04e75d5445",measurementId:"G-6RZXVFW006"});!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt(),t=Ze(e=de(e),rf);t.isInitialized()?t.getImmediate():function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ze(e,rf);if(n.isInitialized()){var r=n.getImmediate();if(le(t,n.getOptions()))return r;throw uf.create("already-initialized")}var i=n.initialize({options:t})}(e)}(Qf);var Wf=function(e){var t="object"==d(e)?e:rt(),n="string"==typeof e?e:ir,r=Ze(t,"firestore").getImmediate({identifier:n});if(!r._initialized){var i=Y("firestore");i&&Hc.apply(void 0,[r].concat(u(i)))}return r}(Qf);n("default",{__name:"Tab2Page",setup:function(e){var t=s(),n=s(),r=s([]),a=s(Number(localStorage.getItem("lastClearTime")||0)),u=function(){var e=Date.now();a.value=e,localStorage.setItem("lastClearTime",e)},c=function(){var e=p(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:if(n.value){e.n=1;break}return e.a(2);case 1:return e.n=2,zl(Yc(Wf,"messages"),{text:n.value,username:t.value,createdAt:new pl("serverTimestamp")});case 2:n.value="";case 3:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();return h((function(){var e=function(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Al&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Ol})).length,n=e.filter((function(e){return e instanceof Nl})).length;if(t>1||t>0&&n>0)throw new Qt(Ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(n=n.concat(i));var o,s=l(n);try{for(s.s();!(o=s.n()).done;)e=o.value._apply(e)}catch(u){s.e(u)}finally{s.f()}return e}(Yc(Wf,"messages"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Sl("orderBy",e);return xl._create(n,t)}("createdAt","asc"));Kl(e,(function(e){r.value=e.docs.map((function(e){return i({id:e.id},e.data())}))}))})),function(e,i){var o=_("ion-button"),s=_("ion-item"),l=_("ion-list");return I(),f(y(m),null,{default:v((function(){return[C(y(S),null,{default:v((function(){return[C(y(A),null,{default:v((function(){return[C(y(D),null,{default:v((function(){return i[2]||(i[2]=[N("Chat")])})),_:1,__:[2]})]})),_:1})]})),_:1}),C(y(O),{fullscreen:!0},{default:v((function(){return[C(y(S),{collapse:"condense"},{default:v((function(){return[C(y(A),null,{default:v((function(){return[C(y(D),{size:"large"},{default:v((function(){return i[3]||(i[3]=[N("Chat")])})),_:1,__:[3]})]})),_:1})]})),_:1}),C(y(R),{modelValue:y(t),"onUpdate:modelValue":i[0]||(i[0]=function(e){return L(t)?t.value=e:t=e}),placeholder:"Enter your username"},null,8,["modelValue"]),C(y(R),{modelValue:y(n),"onUpdate:modelValue":i[1]||(i[1]=function(e){return L(n)?n.value=e:n=e}),placeholder:"Type your message here",onKeyup:M(c,["enter"])},null,8,["modelValue"]),C(o,{onClick:c},{default:v((function(){return i[4]||(i[4]=[N("Send")])})),_:1,__:[4]}),x("div",null,[C(o,{onClick:u},{default:v((function(){return i[5]||(i[5]=[N("Clear Messages")])})),_:1,__:[5]})]),C(l,null,{default:v((function(){return[(I(!0),P(V,null,F(r.value.filter((function(e){return e.createdAt&&1e3*e.createdAt.seconds>a.value})),(function(e){return I(),f(s,{key:e.id},{default:v((function(){return[x("b",null,U(e.username),1),N("  || "+U(e.text),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})}}})}}}))}();
